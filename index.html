<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>IMPACT â€” MAKE A IMPACT</title>
  <meta name="description" content="IMPACT â€” WordPress ê¸°ë°˜ì˜ í•™ìƒ ì €ì ì½˜í…ì¸ ë¥¼ ë¶ˆëŸ¬ì™€ ìì²´ í¬ìŠ¤íŠ¸ í˜ì´ì§€ë¡œ ë³´ì—¬ì£¼ëŠ” í†µí•© í˜ì´ì§€ (ì—ë””í„°, í”„ë¡œí•„, ì¹´í…Œê³ ë¦¬ ë°°ì§€, ë¬´í•œìŠ¤í¬ë¡¤, í¬ìŠ¤íŠ¸/ABOUT ì˜¤ë²„ë ˆì´ í¬í•¨)">
  <!-- ì‚¬ì´íŠ¸ ì•„ì´ì½˜ (ì‚¬ìš©ì ì œê³µ logo.pngê°€ ë™ì¼ í´ë”ì— ìˆë‹¤ê³  ê°€ì •) -->
  <link rel="icon" href="logo.png" type="image/png">

  <style>
  /* ============================
     IMPACT â€” í™•ì¥íŒ ìŠ¤íƒ€ì¼
     (ì£¼ì„/ì„¹ì…˜ì„ ê¸¸ê²Œ ëŠ˜ë ¤ ê°€ë…ì„± ë° í™•ì¥ì„± í™•ë³´)
     ============================ */

  /* ê¸°ë³¸ ë¦¬ì…‹ */
  *, *::before, *::after { box-sizing: border-box; }
  html, body { height: 100%; }
  body {
    margin: 0;
    font-family: "Noto Sans KR", "Apple SD Gothic Neo", "Segoe UI", Roboto, Arial, sans-serif;
    background: #f5f5f5; /* ì „ì²´ ë°ì€ í†¤ */
    color: #111;
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    scroll-behavior: smooth;
  }
  a { color: inherit; text-decoration: none; }
  img { display: block; max-width: 100%; height: auto; }

  /* ì»¨í…Œì´ë„ˆ */
  .wrap { max-width: 1400px; margin: 0 auto; padding: 0 20px; }

  /* í—¤ë”(ìƒë‹¨ ê³ ì •) */
  header.header {
    position: sticky;
    top: 0;
    z-index: 1200;
    background: #ffffff;
    border-bottom: 1px solid rgba(0,0,0,0.06);
    backdrop-filter: blur(5px);
    transition: box-shadow .25s ease;
  }
  header.header.scrolled { box-shadow: 0 8px 30px rgba(0,0,0,0.06); }

  .header-inner {
    height: 72px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 20px;
  }

  .brand {
    display:flex;
    gap:12px;
    align-items:center;
  }
  .brand .logo {
    font-weight:900;
    font-size:28px;
    letter-spacing:1px;
    color:#000;
    display:flex;
    align-items:center;
    gap:10px;
  }
  .brand .tag {
    font-size:12px;
    color:#666;
    font-weight:700;
  }

  .header-actions {
    display:flex;
    gap:8px;
    align-items:center;
  }
  .btn {
    border-radius:10px;
    background:#fff;
    padding:8px 12px;
    border:1px solid rgba(0,0,0,0.08);
    font-weight:700;
    font-size:14px;
    cursor:pointer;
    transition: transform .12s ease, box-shadow .12s ease;
  }
  .btn:active { transform: translateY(1px); }
  .btn.primary {
    background: linear-gradient(135deg,#2e8b57,#1f7a6f);
    color:#fff;
    border: none;
  }

/* Navigation Overlay */
.nav-overlay {
  position: fixed;
  top: 0;
  right: -50%;
  width: 50%;
  height: 100vh;
  background: rgba(255,255,255,0.98);
  z-index: 2000;
  transition: right 0.3s ease;
  display: flex;
  flex-direction: column;
  padding: 60px 40px;
  box-shadow: -5px 0 20px rgba(0,0,0,0.1);
}
.nav-overlay.active { right: 0; }

@media (max-width: 900px) {
  .nav-overlay { width: 100%; right: -100%; padding: 40px 20px; }
  .nav-overlay.active { right: 0; }
}

.nav-close {
  position: absolute;
  top: 30px;
  right: 30px;
  background: none;
  border: none;
  font-size: 32px;
  color: #000;
  cursor: pointer;
}

/* ê²€ìƒ‰ì°½ */
.nav-search {
  margin-bottom: 40px;
}
.nav-search .search-input {
  width: 100%;
  border: none;
  border-bottom: 3px solid #000;
  background: transparent;
  padding: 15px 0;
  font-size: 18px;
  font-weight: 600;
  outline: none;
}
/* ğŸ”¥ ë„¤ë¹„ ê²€ìƒ‰ì°½ */
.nav-search {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 40px;
}
.nav-search .search-icon {
  font-size: 18px;
  color: #111;
}
.nav-search input[type="search"] {
  flex: 1;
  border: none;
  border-bottom: 2px solid #111;
  font-size: 18px;
  font-weight: 600;
  padding: 10px 6px;
  outline: none;
  background: transparent;
}
.nav-search input::placeholder {
  color: #aaa;
  font-weight: 500;
}

/* ğŸ”¥ ì¹´í…Œê³ ë¦¬ ë©”ë‰´ */
.nav-list {
  list-style: none;
  padding: 0;
  margin: 0 0 60px;
  display: flex;
  flex-direction: column;
  gap: 20px;
}
.nav-list li {
  font-size: 36px;     /* âœ… í¼ì§í•˜ê²Œ */
  font-weight: 900;    /* âœ… êµµê²Œ */
  color: #111;
  cursor: pointer;
  transition: color 0.2s ease;
}
.nav-list li:hover {
  color: #c6ff00;
}

/* ğŸ”¥ í‘¸í„° ë§í¬ */
.nav-footer-links {
  margin-top: auto;
  display: flex;
  gap: 18px;           /* âœ… ë„ì–´ì“°ê¸° */
  font-size: 14px;
  font-weight: 800;
}
.nav-footer-links a {
  color: #111;
  text-decoration: none;
}
.nav-footer-links a:hover {
  text-decoration: underline;
}

/* ğŸ”¥ í‘¸í„° ì„¤ëª… */
.nav-extra {
  margin-top: 16px;
  font-size: 13px;
  color: #777;
}


/* ì¹´í…Œê³ ë¦¬ ë©”ë‰´ */
.nav-menu {
  list-style: none;
}
.nav-menu li { margin-bottom: 25px; }
.nav-menu a {
  text-decoration: none;
  color: #000;
  font-size: 36px;       /* âœ… í¼ì§í•˜ê²Œ */
  font-weight: 900;      /* âœ… Bold */
  transition: color 0.3s ease;
  cursor: pointer;
}
.nav-menu a:hover { color: #c6ff00; }

/* Footer */
.nav-footer {
  margin-top: auto;
  display: flex;
  flex-direction: column;
  gap: 15px;
}
.nav-footer a {
  text-decoration: none;
  color: #666;
  font-size: 12px;
  font-weight: bold;
}


/* ğŸ” ê²€ìƒ‰ì°½ */
.nav-search {
  display: flex;
  align-items: center;
  gap: 8px;
  margin: 40px 0 12px;
}
.nav-search .search-icon {
  font-size: 18px;
  color: #111;
}
.nav-search input[type="search"] {
  flex: 1;
  border: none;
  border-bottom: 2px solid #111;
  font-size: 15px;
  padding: 6px 4px;
  outline: none;
  font-weight: 600;
  color: #111;
}
.nav-search input::placeholder {
  color: #aaa;
  font-weight: 600;
}

/* êµ¬ë¶„ì„  */
.nav-divider {
  border: none;
  border-bottom: 1px solid #111;
  margin: 8px 0 24px;
}

/* ì¹´í…Œê³ ë¦¬ ë¦¬ìŠ¤íŠ¸ */
.nav-list {
  list-style: none;
  padding: 0;
  margin: 0 0 60px;
  display: flex;
  flex-direction: column;
  gap: 14px;
}
.nav-list li {
  font-size: 20px;
  font-weight: 900; /* êµµì€ ê¸€ì”¨ */
  color: #111;
  cursor: pointer;
  transition: color .2s ease;
}
.nav-list li:hover {
  color: #555;
}

/* í•˜ë‹¨ í‘¸í„° ë§í¬ */
.nav-footer-links {
  margin-top: auto;
  font-size: 13px;
  font-weight: 900;
  display: flex;
  gap: 8px;
  align-items: center;
}
.nav-footer-links a {
  color: #111;
  text-decoration: none;
}
.nav-footer-links span {
  color: #999;
}


  /* ë©”ì¸ í™ˆ ë ˆì´ì•„ì›ƒ (ì¢Œ1 + ìš°4 ë°˜ë³µ) */
  .home {
    max-width: 1400px;
    margin: 28px auto;
    display:flex;
    flex-direction:column;
    gap:26px;
    padding: 0 20px 80px;
  }

  .row { display:grid; grid-template-columns: 2fr 1fr; gap:20px; align-items:start; }
  /* ì˜¤ë¥¸ìª½: 4ê°œì˜ ì¹´ë“œ ë¸”ë¡ -> vstack of 4 */
  .col-left {
    background: transparent;
    border-radius: 12px;
    overflow: hidden;
    position: relative;
    min-height: 320px;
  }
  .col-left .hero {
    width:100%;
    height:100%;
    min-height:320px;
    display:block;
    object-fit:cover;
    background:#ddd;
  }
  /* overlay area that ensures title contrast */
  .col-left .hero-overlay {
    position:absolute;
    inset:auto 0 0 0;
    padding:20px;
    padding-bottom:28px;
    display:flex;
    flex-direction:column;
    gap:8px;
    /* gradient to ensure readability by default; overridden by JS if possible */
    background: linear-gradient(180deg, rgba(255,255,255,0.0), rgba(0,0,0,0.45));
    transition: background .28s ease;
  }
  .col-left .hero-title {
    margin:0;
    font-size:26px;
    font-weight:900;
    line-height:1.05;
    color: #fff; /* default white; JS may switch to black */
    transition: color .18s ease, text-shadow .18s ease;
    max-width: 92%;
  }
  .col-left .meta {
    display:flex;
    align-items:center;
    gap:10px;
    color: #fff;
    font-size: 13px;
    opacity:0.95;
  }
  .col-left .meta img { width:36px; height:36px; border-radius:50%; object-fit:cover; border:2px solid rgba(255,255,255,0.9); }

  .col-right {
    display:grid;
    gap:12px;
    grid-auto-rows: 1fr;
  }
  .card {
    background: #fff;
    border-radius: 10px;
    overflow: hidden;
    border: 1px solid rgba(0,0,0,0.06);
    transition: transform .16s ease, box-shadow .16s ease;
    cursor:pointer;
  }
  .card:hover { transform: translateY(-6px); box-shadow: 0 10px 30px rgba(0,0,0,0.06); }
  .card .thumb { width:100%; height:120px; overflow:hidden; background:#eee; }
  .card .thumb img { width:100%; height:100%; object-fit:cover; display:block; }
  .card .card-body { padding:12px; }
  .card h3 { font-size:15px; font-weight:800; margin-bottom:8px; color:#111; }
  .card .meta { display:flex; align-items:center; gap:8px; color:#666; font-size:13px; }

  /* ì¹´ë“œ ë‚´ë¶€ ì—ë””í„° ì´ë¦„ â€” ì‚¬ìš©ìê°€ 'ì—ë””í„°' ë¼ëŠ” ë‹¨ì–´ëŠ” ë¹¼ë‹¬ë¼ê³  ìš”ì²­í–ˆìœ¼ë¯€ë¡œ ì´ë¦„ë§Œ í‘œì‹œ */
  .meta .author-name { font-weight:700; color:#111; }

  /* ì¹´í…Œê³ ë¦¬ ë°°ì§€(ì§ì‚¬ê°í˜•) */
  .cat-badge {
    display:inline-block;
    padding:6px 10px;
    border-radius:6px;
    font-weight:800;
    font-size:12px;
    color:#fff;
  }
  .hero-cats {
  position: absolute;
  right: 16px;
  bottom: 16px;
  display: flex;
  gap: 6px;
}

  .cat-tech{ background:#1e90ff; color:#fff; }
  .cat-eat{ background:#ff6347; color:#fff; }
  .cat-style{ background:#32cd32; color:#fff; }
  .cat-culture{ background:#8a2be2; color:#fff; }
  .cat-life{ background:#ffa500; color:#000; }
  .cat-editors-pick{ background:#ff1493; color:#fff; }

  /* ì¹´í…Œê³ ë¦¬ í˜ì´ì§€ (ì „ì²´ í™”ë©´ ì˜¤ë²„ë ˆì´) */
  .category-overlay {
    display:none;
    position:fixed;
    inset:0;
    background:#fff;
    z-index: 1500;
    overflow:auto;
    padding: 20px;
    animation: overlayIn .28s ease;
  }
  .category-overlay.active { display:block; }
  .category-top {
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:12px;
    border-bottom:1px solid rgba(0,0,0,0.06);
    padding-bottom:12px;
  }
  .category-title { font-size:24px; font-weight:900; color:#111; }
  .category-sub { color:#666; font-size:14px; }

  .category-grid {
    margin-top:18px;
    display:grid;
    gap:18px;
    grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
    padding: 20px 0 80px;
  }

  /* í¬ìŠ¤íŠ¸ í˜ì´ì§€ (ì˜¤ë²„ë ˆì´) */
  .post-overlay {
    display:none;
    position: fixed;
    inset: 0;
    background: #ffffff;
    z-index: 1800;
    overflow-y: auto;
    padding: 32px;
    align-items: start;
    animation: overlayIn .28s ease;
  }
  .post-overlay.active { display:flex; }
  .post-article {
    margin: 0 auto;
    max-width: 900px;
    background: transparent;
  }
  .post-article h1 { font-size:32px; font-weight:900; color:#111; margin-bottom:12px; }
  .post-article .post-meta {
    display:flex;
    align-items:center;
    gap:12px;
    color:#444;
    margin-bottom:18px;
  }
  .post-article .post-meta img { width:52px; height:52px; border-radius:50%; }

  .post-article .post-content {
    color:#222;
    line-height:1.9;
  }
/* ABOUT ì „ì²´ í˜ì´ì§€ */
.about-page {
  display: none;   /* ê¸°ë³¸ì€ ìˆ¨ê¹€ */
  position: fixed;
  inset: 0;
  background: #fff;
  z-index: 1700;
  overflow: auto;
  padding: 40px;
}
.about-page.active {
  display: block;  /* router.openAbout() í˜¸ì¶œë  ë•Œ í‘œì‹œ */
}


  /* ê²€ìƒ‰ ì˜¤ë²„ë ˆì´ (ì „ì²´í™”ë©´) */
  .search-overlay {
    display:none;
    position: fixed;
    inset: 0;
    background: rgba(255,255,255,0.98);
    z-index: 1600;
    overflow:auto;
    padding:28px;
  }
  .search-overlay.active { display:block; }
 

  /* ìƒë‹¨ìœ¼ë¡œ ë²„íŠ¼ (í° ë°°ê²½ + ê²€ì • í™”ì‚´í‘œ) */
  .to-top {
    position: fixed;
    right: 22px;
    bottom: 22px;
    width: 52px;
    height: 52px;
    border-radius: 12px;
    background: #fff;
    color:#000;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:22px;
    z-index: 2500;
    box-shadow: 0 12px 30px rgba(0,0,0,0.08);
    opacity: 0;
    transform: translateY(20px);
    transition: all .28s cubic-bezier(.2,.9,.2,1);
    border: 1px solid rgba(0,0,0,0.06);
  }
  .to-top.show { opacity:1; transform: translateY(0); }

  /* FOOTER */
  footer.site-footer {
    background: #111;
    color: #eee;
    padding: 40px 20px;
    margin-top: 20px;
  }
  .footer-inner {
    max-width: 1400px;
    margin: 0 auto;
    display:flex;
    justify-content: space-between;
    gap:20px;
    align-items:flex-start;
    flex-wrap:wrap;
  }
  .footer-brand { font-size:40px; font-weight:900; color:#fff; font-style:italic; }
  .footer-links { display:flex; gap:14px; flex-direction:column; font-weight:800; }
  .footer-right { color:#999; font-size:13px; }
  .footer-right .promote { font-weight:900; color:#fff; margin-top:10px; }

  /* ì• ë‹ˆë©”ì´ì…˜ ë³´ì¡° */
  @keyframes overlayIn { from { opacity:0; transform: translateY(6px); } to { opacity:1; transform: translateY(0); } }

  /* ë°˜ì‘í˜• */
  @media (max-width: 1100px) {
    .row { grid-template-columns: 1fr; }
    .col-right { grid-auto-rows: unset; grid-template-columns: repeat(2, 1fr); }
  }
  @media (max-width: 680px) {
    .header-inner { padding: 12px; height:64px; }
    .brand .logo { font-size:20px; }
    .nav-overlay { padding: 20px; }
    .col-left .hero-overlay { padding:14px; }
    .card .thumb { height: 140px; }
    .to-top { right: 12px; bottom: 12px; }
  }
/* ===== ëª¨ë˜ ê²€ìƒ‰ì°½ ===== */
.search-bar {
  display: flex;
  align-items: center;
  background: #fff;
  border-radius: 50px;
  box-shadow: 0 6px 20px rgba(0,0,0,0.08);
  padding: 6px 14px;
}
.search-bar input[type="search"] {
  flex: 1;
  border: none;
  outline: none;
  font-size: 16px;
  padding: 12px 14px;
  border-radius: 50px;
}
.search-bar .search-btn {
  background: #111;        /* âœ… ê²€ì€ìƒ‰ ë°°ê²½ */
  color: #fff;             /* âœ… ê¸€ìëŠ” í°ìƒ‰ */
  border: none;
  border-radius: 50px;
  padding: 10px 18px;
  font-weight: 800;
  cursor: pointer;
  transition: background 0.2s ease;
}
.search-bar .search-btn:hover {
  background: #333;        /* âœ… hover ì‹œ ì•½ê°„ ë°ì€ ê²€ì • */
}
.search-bar .close-btn {
  background: none;
  border: none;
  font-size: 20px;
  margin-left: 8px;
  cursor: pointer;
  color: #666;
}

  /* ê¸´ ì£¼ì„ (í™•ì¥íŒ ë¬¸ì„œì„± ì£¼ì„ì„ ë”í•´ íŒŒì¼ ê¸¸ì´ í™•ì¥) */
  /* 
     íŒŒì¼: index.html (IMPACT í†µí•©)
     ëª©ì : í•˜ë‚˜ì˜ ì •ì  HTML íŒŒì¼ì—ì„œ WordPress.comì˜ public-apië¥¼ ì‚¬ìš©í•´ ê¸€ ëª©ë¡, í¬ìŠ¤íŠ¸, ì‘ì„±ì ì•„ë°”íƒ€, ì¹´í…Œê³ ë¦¬ ë“±ì„ ë¶ˆëŸ¬ì™€ ìì²´ í¬ìŠ¤íŠ¸ ì˜¤ë²„ë ˆì´ë¡œ í‘œì‹œ
     ì£¼ìš” êµ¬í˜„ í¬ì¸íŠ¸:
       - ëª¨ë“  posts í˜¸ì¶œì— _embed íŒŒë¼ë¯¸í„° í¬í•¨í•˜ì—¬ ì‘ì„±ì/ì¹´í…Œê³ ë¦¬/ë¯¸ë””ì–´ë¥¼ í•¨ê»˜ ê°€ì ¸ì˜´.
       - ì—ë””í„°(ì‘ì„±ì) ì´ë¦„ê³¼ í”„ë¡œí•„ ì´ë¯¸ì§€ë¥¼ ì¹´ë“œ ë° í¬ìŠ¤íŠ¸ì—ì„œ ì§ì ‘ í‘œì‹œ.
       - ë”ë³´ê¸°(ì¹´í…Œê³ ë¦¬ ë„¤ë¹„)ëŠ” ë°ìŠ¤í¬íƒ‘ì—ì„œ ì˜¤ë¥¸ìª½ ë°˜ ì˜¤ë²„ë ˆì´, ëª¨ë°”ì¼ì—ì„œëŠ” ì „ì²´ í™”ë©´.
       - ê²€ìƒ‰, ë¬´í•œ ìŠ¤í¬ë¡¤(ë©”ì¸/ì¹´í…Œê³ ë¦¬), ìƒë‹¨ìœ¼ë¡œ ë²„íŠ¼, í¬ìŠ¤íŠ¸ ë‚´ë¶€ ë³´ê¸°, ABOUT í˜ì´ì§€ í¬í•¨.
     ë³´ì•ˆ ì£¼ì˜:
       - í† í°(access token)ì„ íŒŒì¼ë‚´ì— ì§ì ‘ ì‚½ì…í–ˆìŠµë‹ˆë‹¤. ì‹¤ì„œë¹„ìŠ¤ì—ì„œëŠ” Netlify Functions ë˜ëŠ” ì„œë²„ì‚¬ì´ë“œë¡œ í† í°ì„ ìˆ¨ê²¨ ì£¼ì„¸ìš”.
  */
/* ============================
   âœ… ë”ë³´ê¸°(nav overlay) ìµœì¢… ë®ì–´ì“°ê¸°
   ============================ */
.nav-list li {
  font-size: 36px !important;   /* í¼ì§í•˜ê²Œ */
  font-weight: 900 !important;  /* ë‘ê»ê²Œ */
  color: #111 !important;
  cursor: pointer;
  transition: color 0.2s ease;
}
.nav-list li:hover {
  color: #c6ff00 !important;
}

.nav-footer-links {
  margin-top: auto !important;
  display: flex !important;
  gap: 20px !important;
  font-size: 14px !important;
  font-weight: 900 !important;
}
.nav-footer-links a {
  color: #111 !important;
  text-decoration: none !important;
}
.nav-footer-links a:hover {
  text-decoration: underline !important;
}

/* í´ë¦­ ê°€ëŠ¥í•œ ìš”ì†Œ ì»¤ì„œ ë³€ê²½ */
#logoBtn {
  cursor: pointer;
}

.col-left, 
.card {
  cursor: pointer;  /* ì¹´ë“œ/íˆì–´ë¡œ í° ê²Œì‹œë¬¼ */
}

.to-top {
  position: fixed;
  right: 22px;
  bottom: 22px;
  width: 52px;
  height: 52px;
  border-radius: 12px;
  background: #fff;
  color:#000;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:22px;
  z-index: 2500;
  box-shadow: 0 12px 30px rgba(0,0,0,0.08);
  opacity: 0;
  transform: translateY(20px);
  transition: all .28s cubic-bezier(.2,.9,.2,1);
  border: 1px solid rgba(0,0,0,0.06);
}
.to-top.show {
  opacity:1;
  transform: translateY(0);
}
  </style>
</head>
<body>

  <!-- HEADER -->
  <header class="header" id="siteHeader" role="banner">
    <div class="header-inner wrap">
      <div class="brand" aria-hidden="false">
        <div class="logo" id="logoBtn" onclick="router.goHome()">
          IMPACT
          <span style="font-size:12px;color:#777;font-weight:800">MAKE A IMPACT</span>
        </div>
      </div>

      <div class="header-actions" role="navigation" aria-label="ìƒë‹¨ ë©”ë‰´">
  <button class="btn" onclick="
  document.getElementById('navOverlay').classList.remove('active');
  ui.openSearch();
">ê²€ìƒ‰</button>
  <button class="btn" aria-controls="navOverlay" aria-expanded="false" onclick="ui.toggleNav()">ë”ë³´ê¸°</button>
</div>
    </div>
  </header>

  <!-- NAV OVERLAY (ì˜¤ë¥¸ìª½ ë°˜) -->
  <aside class="nav-overlay" id="navOverlay" aria-hidden="true" aria-label="ì¹´í…Œê³ ë¦¬ ë„¤ë¹„">
    <button class="nav-close" aria-label="ë„¤ë¹„ê²Œì´ì…˜ ë‹«ê¸°" onclick="ui.toggleNav()">Ã—</button>
<div>
  <!-- ê²€ìƒ‰ì°½ -->
  <div class="nav-search">
    <span class="search-icon">ğŸ”</span>
    <input type="search" id="globalSearchInput" placeholder="ê²€ìƒ‰ì–´ ì…ë ¥">
  </div>
  <!-- ì¹´í…Œê³ ë¦¬ ë¦¬ìŠ¤íŠ¸ -->
  <ul class="nav-list" id="navList" role="menu" aria-label="ì¹´í…Œê³ ë¦¬ ëª©ë¡">
    <!-- JSì—ì„œ ì±„ì›€ -->
  </ul>

<!-- í‘¸í„° ë§í¬ -->
<div class="nav-footer-links">
  <a href="javascript:void(0)" onclick="ui.toggleNav(); router.openAbout()">ABOUT</a>
  <a href="javascript:void(0)" onclick="alert('EDITORS í˜ì´ì§€ëŠ” ì¶”í›„ êµ¬í˜„ë©ë‹ˆë‹¤')">EDITORS</a>
  <a href="javascript:void(0)" onclick="alert('NEWSLETTER í˜ì´ì§€ëŠ” ì¶”í›„ êµ¬í˜„ë©ë‹ˆë‹¤')">NEWSLETTER</a>
  <a href="https://www.instagram.com/ceo_impact_official" target="_blank" rel="noopener">INSTAGRAM</a>
</div>
</div>

    </div>
    <div class="nav-extra">
      <div style="color:#777;font-size:13px">IMPACTëŠ” WordPress ê¸°ë°˜ìœ¼ë¡œ ì½˜í…ì¸ ë¥¼ ë°›ì•„ì™€ ì‚¬ì´íŠ¸ ë‚´ì—ì„œ ìì²´ í¬ìŠ¤íŠ¸ í˜ì´ì§€ë¡œ í‘œì‹œí•©ë‹ˆë‹¤.</div>
    </div>
  </aside>

  <!-- MAIN: í™ˆ ì˜ì—­ -->
  <main class="home" id="home" role="main" aria-live="polite">

    <!-- ì»¨í…ì¸ ì´ ëª¨ë‘ ì±„ì›Œì§ˆ JS ì˜ì—­ -->
    <!-- ê° rowëŠ” JSê°€ ì±„ìš´ë‹¤ -->
    <div id="rowsContainer"></div>

    <!-- ë¡œë”© í‘œì‹œ -->
    <div id="homeLoading" style="text-align:center;color:#666;padding:36px 0">ë¡œë”© ì¤‘...</div>
  </main>

  <!-- CATEGORY ì˜¤ë²„ë ˆì´ (ì „ì²´ í™”ë©´) -->
  <section class="category-overlay" id="categoryOverlay" aria-hidden="true" role="region">
    <div class="wrap">
      <div class="category-top">
        <div>
          <div class="category-title" id="categoryOverlayTitle">CATEGORY</div>
          <div class="category-sub" id="categoryOverlaySubtitle">ì¹´í…Œê³ ë¦¬ì— ëŒ€í•œ ì„¤ëª…</div>
        </div>
        <div>
          <button class="btn" onclick="router.closeCategory()">ë‹«ê¸°</button>
        </div>
      </div>

      <div class="category-grid" id="categoryGrid" aria-live="polite"></div>

      <div id="categoryLoading" style="text-align:center;color:#666;padding:28px 0"></div>
    </div>
  </section>

 <!-- POST ì˜¤ë²„ë ˆì´ (ë‚´ë¶€ í¬ìŠ¤íŠ¸ ë·°) -->
<article class="post-overlay" id="postOverlay" aria-hidden="true" role="article">
  <div style="width:100%;max-width:1200px;margin:0 auto;">
    <div style="display:flex;justify-content:flex-end;align-items:center;gap:12px;margin-bottom:18px">
      <button class="btn" onclick="router.closePost()">ë‹«ê¸°</button>
    </div>
    <div class="post-article" id="postArticle"></div>
  </div>
</article>


  <!-- SEARCH ì˜¤ë²„ë ˆì´ -->
  <section class="search-overlay" id="searchOverlay" aria-hidden="true" role="search">
    <div class="wrap" style="max-width:1100px;margin:0 auto;">
      <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;margin-bottom:18px">
        <div style="flex:1">
          <div class="search-bar">
  <input type="search" class="search-input" placeholder="ê²€ìƒ‰ì–´ ì…ë ¥ (Enterë¡œ ê²€ìƒ‰)" aria-label="ê²€ìƒ‰ì–´">
  <button type="button" class="search-btn" id="globalSearchBtn">ê²€ìƒ‰</button>
  <button type="button" class="close-btn" onclick="ui.closeSearch()">Ã—</button>
</div>
        </div>
      </div>
      <div id="searchResults" class="category-grid"></div>
    </div>
  </section>

  <!-- ABOUT ì „ì²´ í˜ì´ì§€ -->
  <section class="about-page" id="aboutPageSection" aria-hidden="true" role="region">
    <div class="wrap about-content">
      <div style="display:flex;justify-content:space-between;align-items:flex-start;gap:12px;margin-bottom:18px">
        <div>
          <h2 style="font-size:32px;margin-bottom:10px">ABOUT</h2>
          <div style="color:#333;font-size:15px;line-height:1.8">
            <p><strong>IMPACT</strong> ì€ ç¾ & å‰ KAIST IP-CEO í•™ìƒë“¤ê³¼ POSTECH CEO í•™ìƒë“¤ì´ í•¨ê»˜ ì‘ì„±í•˜ëŠ” ì‹¬ì¸µ ì½˜í…ì¸  í”Œë«í¼ì…ë‹ˆë‹¤.</p>
            <p>í•™ìƒ ì €ìë“¤ì˜ ê²½í—˜ê³¼ ë¶„ì„ì„ ë°”íƒ•ìœ¼ë¡œ ê¸°ìˆ Â·ê²½ì˜Â·ì°½ì˜ì„±ì„ ê²°í•©í•œ ê¸€ì„ ì œê³µí•©ë‹ˆë‹¤. í˜„ì¥ì˜ ì‚¬ë¡€, ë°ì´í„° ì¸í…”ë¦¬ì „ìŠ¤, ê¹Šì´ ìˆëŠ” ë¶„ì„ì„ í†µí•´ ë…ìì—ê²Œ í†µì°°ì„ ì „ë‹¬í•©ë‹ˆë‹¤.</p>
            </p>
          </div>
          <div style="margin-top:20px"><button class="btn" onclick="router.closeAbout()">ë‹«ê¸°</button></div>
        </div>
      </div>
    </div>
  </section>

  <!-- Back to top -->
  <button class="to-top" id="toTopBtn" title="ë§¨ ìœ„ë¡œ" aria-label="ë§¨ ìœ„ë¡œ">â†‘</button>

  <!-- Footer (ê³µí†µ) -->
  <footer class="site-footer" role="contentinfo" aria-label="ì‚¬ì´íŠ¸ í‘¸í„°">
    <div class="wrap footer-inner">
      <div>
        <div class="footer-brand">IMPACT</div>
        <div style="margin-top:10px;color:#ddd;font-size:13px">ê´‘ê³  ì œíœ´ ë¬¸ì˜ | <a href="mailto:ceo.impact.official@gmail.com">ceo.impact.official@gmail.com</a></div>
        <div style="color:#ddd;font-size:13px;margin-top:6px">ë³´ë„ìë£Œ | <a href="mailto:ceo.impact.official@gmail.com">ceo.impact.official@gmail.com</a></div>
      </div>

      <div class="footer-links">
        <a href="javascript:void(0)" onclick="router.openAbout()">ABOUT</a>
        <a href="javascript:void(0)" onclick="alert('EDITORS í˜ì´ì§€ëŠ” ì¶”í›„ êµ¬í˜„ë©ë‹ˆë‹¤')">EDITORS</a>
        <a href="javascript:void(0)" onclick="alert('NEWSLETTER í˜ì´ì§€ëŠ” ì¶”í›„ êµ¬í˜„ë©ë‹ˆë‹¤')">NEWSLETTER</a>
        <a href="https://www.instagram.com/ceo_impact_official" target="_blank" rel="noopener">INSTAGRAM</a>
      </div>

      <div class="footer-right">
        <div style="font-weight:800;color:#fff">IMPACT CEO. ALL RIGHTS RESERVED.</div>
        <div style="color:#999;font-size:13px;margin-top:10px">ì‚¬ì´íŠ¸ëŠ” WordPress.com APIë¡œë¶€í„° ì½˜í…ì¸ ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.</div>
      </div>
    </div>
  </footer>

  <!-- í…œí”Œë¦¿(ìŠ¤í¬ë¦½íŠ¸ìš©) -->
  <template id="cardTpl">
    <article class="card">
      <div class="thumb"><img src="" alt=""></div>
      <div class="card-body">
        <div class="cat-row"></div>
        <h3 class="title"></h3>
        <div class="meta">
          <img class="author-avatar" src="" alt="">
          <div>
            <div class="author-name"></div>
            <div class="date" style="font-size:12px;color:#777"></div>
          </div>
        </div>
      </div>
    </article>
  </template>

  <script>
  /**********************************************************************
   * IMPACT â€” í™•ì¥íŒ ìë°”ìŠ¤í¬ë¦½íŠ¸
   *
   * ë³€ê²½ ìš”ì•½:
   * - ACCESS_TOKEN ì œê±° (í† í°ì€ ì„œë²„(Netlify í•¨ìˆ˜)ì˜ í™˜ê²½ë³€ìˆ˜ë¡œ ê´€ë¦¬)
   * - api(path) -> Netlify í•¨ìˆ˜ í”„ë¡ì‹œ ê²½ìœ 
   * - headers()ëŠ” ë” ì´ìƒ Authorizationì„ ë¶™ì´ì§€ ì•ŠìŒ
   *
   **********************************************************************/

  /* ===========================
     ì„¤ì •ê°’ (ì‚¬ìš©ì ì œê³µ)
     =========================== */
  const WP_SITE = "impactceo0.wordpress.com";
  // ACCESS_TOKENì€ ì´ì œ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤. í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë…¸ì¶œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

  // ì¹´í…Œê³ ë¦¬ ë§¤í•‘ (slug -> id) (ì œê³µí•˜ì‹  ê°’)
  const CATEGORIES = {
    "tech": 318,
    "eat": 123073,
    "style": 2286,
    "culture": 1098,
    "life": 124,
    "editors-pick": 259543
  };

  // ë”ë³´ê¸° ë©”ë‰´ í‘œì‹œ ìˆœì„œ (ìš”ì²­)
  const NAV_ORDER = ["TECH", "EAT", "STYLE", "CULTURE", "LIFE", "EDITORS' PICK"];

  // home config
  const HOME_PER_PAGE = 5; // we will load chunks of 5 and each row uses up to 5 (1 left, up to 4 right) ; total up to 20 posts
  const HOME_MAX = 20; // limit total posts to show on homepage

  // ìƒíƒœ ë³€ìˆ˜
  const state = {
    homePage: 1,
    homeLoaded: 0,
    homeFinished: false,
    loadingHome: false,
    postsCache: {},    // id -> post object
    categoryPages: {}, // slug -> next page number
    categoryFinished: {}, // slug -> finished flag
  };

  /* ===========================
     ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
     =========================== */
  // ë³€ê²½ëœ api(): Netlify í•¨ìˆ˜ í”„ë¡ì‹œë¥¼ ê²½ìœ í•˜ë„ë¡ ë³€ê²½.
  // Netlify í•¨ìˆ˜ëŠ” /netlify/functions/wpProxy ì´ë©°, ì‹¤ì œ WP ìš”ì²­ ê²½ë¡œ(ì¿¼ë¦¬ í¬í•¨)ëŠ” query param 'path'ì— ë„£ì–´ ë³´ëƒ…ë‹ˆë‹¤.
  function api(path) {
  const p = path.includes('_embed') ? path : (path + (path.includes('?') ? '&' : '?') + '_embed');
  return `/.netlify/functions/wpProxy?path=${encodeURIComponent(p)}`;
}


  function headers() {
    // í´ë¼ì´ì–¸íŠ¸ì—ì„œëŠ” í† í°ì„ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ë¹ˆ ê°ì²´ ë°˜í™˜.
    return {};
  }

  function safeText(html) {
    if(!html) return '';
    return html.replace(/<[^>]+>/g,'').trim();
  }

  // ë‚ ì§œ í¬ë§· (ë…„ë„. ì›”. ì¼ í˜•ì‹)
  function formatDate(dstr) {
    try {
      const d = new Date(dstr);
      const y = d.getFullYear();
      const m = String(d.getMonth()+1).padStart(2,'0');
      const dd = String(d.getDate()).padStart(2,'0');
      return `${y}. ${m}. ${dd}.`;
    } catch(e) { return ''; }
  }

  // ì¹´í…Œê³ ë¦¬ ì´ë¦„ì— ë§ëŠ” í´ë˜ìŠ¤
  function pickCategoryClass(nameOrSlug) {
    if(!nameOrSlug) return '';
    const s = String(nameOrSlug).toLowerCase();
    if(s.includes('tech') || s.includes('technology')) return 'cat-tech';
    if(s.includes('eat')) return 'cat-eat';
    if(s.includes('style')) return 'cat-style';
    if(s.includes('culture')) return 'cat-culture';
    if(s.includes('life')) return 'cat-life';
    if(s.includes('editor') || s.includes('editors')) return 'cat-editors-pick';
    return '';
  }

  /* ===========================
     DOM ë Œë” í—¬í¼
     =========================== */

  // ë„¤ë¹„ë¦¬ìŠ¤íŠ¸ ë Œë” (ìˆœì„œ ê³ ì •)
function renderNavList() {
  const navList = document.getElementById('navList');
  navList.innerHTML = '';
  NAV_ORDER.forEach(item => {
    const li = document.createElement('li');
    li.textContent = item;
    li.addEventListener('click', ()=>{
      // âœ… ë¨¼ì € ë”ë³´ê¸° ë‹«ê¸°
      ui.toggleNav();

      if(item === 'SEARCH') {
        ui.openSearch();
      } else {
        let slug = item.toLowerCase().replace(/'/g,'').replace(/\s/g,'-');
        if(slug === "editors-pick") slug = 'editors-pick';

        const catId = CATEGORIES[slug];
        if(catId) {
          router.openCategory(slug);
        } else {
          alert('í•´ë‹¹ ì¹´í…Œê³ ë¦¬ëŠ” í˜„ì¬ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
        }
      }
    });
    navList.appendChild(li);
  });
}


  // ì¹´ë“œ ë…¸ë“œ ìƒì„±: post ê°ì²´ ì‚¬ìš©
  function createCardNode(post) {
    const tpl = document.getElementById('cardTpl');
    const node = tpl.content.firstElementChild.cloneNode(true);
    // thumb
    const img = node.querySelector('.thumb img');
    let thumbUrl = '';
    try {
      if(post._embedded && post._embedded['wp:featuredmedia'] && post._embedded['wp:featuredmedia'][0] && post._embedded['wp:featuredmedia'][0].source_url) {
        thumbUrl = post._embedded['wp:featuredmedia'][0].source_url;
      }
    } catch(e) { thumbUrl = ''; }
    img.src = thumbUrl || placeholderDataURI(1200, 800, 'No Image');

    // title
    node.querySelector('.title').innerHTML = post.title && post.title.rendered ? post.title.rendered : 'ì œëª© ì—†ìŒ';

    // meta: avatar, name, date
    const avatarImg = node.querySelector('.author-avatar');
    const authorNameEl = node.querySelector('.author-name');
    const dateEl = node.querySelector('.date');

    if(post._embedded && post._embedded.author && post._embedded.author[0]) {
      const a = post._embedded.author[0];
      // Many WP author avatar urls provided under a.avatar_urls
      const avatarUrl = (a.avatar_urls && (a.avatar_urls['96']||a.avatar_urls['48']||a.avatar_urls['24'])) ? (a.avatar_urls['48']||a.avatar_urls['24']) : '';
      avatarImg.src = avatarUrl || placeholderDataURI(96,96,'U');
      avatarImg.alt = a.name || 'author';
      // ì‚¬ìš©ì ìš”êµ¬: 'ì—ë””í„°' ë¼ëŠ” ë‹¨ì–´ ë¹¼ê³  ì´ë¦„ë§Œ í‘œì‹œ
      authorNameEl.textContent = a.name || 'ìµëª…';
    } else {
      avatarImg.src = placeholderDataURI(96,96,'U');
      authorNameEl.textContent = 'ìµëª…';
    }
    dateEl.textContent = formatDate(post.date);

    // categories
    const catRow = node.querySelector('.cat-row');
    catRow.innerHTML = '';
    if(post._embedded && post._embedded['wp:term'] && post._embedded['wp:term'][0]) {
      const cats = post._embedded['wp:term'][0];
      cats.forEach(c => {
        if(c && c.name) {
          const span = document.createElement('span');
          span.className = 'cat-badge';
          span.textContent = c.name;
          const cls = pickCategoryClass(c.slug || c.name);
          if(cls) span.classList.add(cls);
          else span.style.background = '#666';
          catRow.appendChild(span);
        }
      });
    }

    // click event: open post overlay (site internal)
    node.addEventListener('click', ()=>{
      openPostOverlayById(post.id);
    });

    return node;
  }

  // placeholder dataURI generator for basic inline svg placeholder
  function placeholderDataURI(w=600, h=400, txt='No Image') {
    const svg = `<svg xmlns='http://www.w3.org/2000/svg' width='${w}' height='${h}'><rect width='100%' height='100%' fill='#efefef'/><text x='50%' y='50%' fill='#aaa' font-size='20' text-anchor='middle' dominant-baseline='middle'>${txt}</text></svg>`;
    return 'data:image/svg+xml;charset=UTF-8,' + encodeURIComponent(svg);
  }

  /* ===========================
     í™ˆ ë¡œë” (ë¬´í•œìŠ¤í¬ë¡¤ ì§€ì›)
     =========================== */
  async function loadHomeChunk() {
    if(state.loadingHome || state.homeFinished) return;
    state.loadingHome = true;
    document.getElementById('homeLoading').textContent = 'ë¡œë”© ì¤‘...';

    try {
      // page-based fetching; per_page = HOME_PER_PAGE
      const res = await fetch(api(`posts?per_page=${HOME_PER_PAGE}&page=${state.homePage}`), { headers: headers() });
      if(!res.ok) {
        if(res.status === 400) {
          state.homeFinished = true;
          document.getElementById('homeLoading').textContent = 'ë” ì´ìƒ ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.';
        } else {
          throw new Error('Home fetch failed: ' + res.status);
        }
        state.loadingHome = false;
        return;
      }
      const posts = await res.json();
      if(!Array.isArray(posts) || posts.length === 0) {
        state.homeFinished = true;
        document.getElementById('homeLoading').textContent = 'ì•„ì§ ê²Œì‹œëœ ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.';
        state.loadingHome = false;
        return;
      }

      // ìºì‹±
      posts.forEach(p => state.postsCache[p.id] = p);

      // render groups of up to 5 per row (one big, up to 4 small)
      const container = document.getElementById('rowsContainer');

      // flatten previous rows count and ensure we don't exceed HOME_MAX
      for(let i=0; i<posts.length; i += 5) {
        const group = posts.slice(i, i+5);
        if(state.homeLoaded >= HOME_MAX) {
          state.homeFinished = true;
          break;
        }
        // create row
        const row = document.createElement('div');
        row.className = 'row';

        // left big
        const leftPost = group[0];
        const leftDiv = document.createElement('div');
        leftDiv.className = 'col-left';
        // hero image
        let heroUrl = '';
        try {
          if(leftPost._embedded && leftPost._embedded['wp:featuredmedia'] && leftPost._embedded['wp:featuredmedia'][0]) {
            heroUrl = leftPost._embedded['wp:featuredmedia'][0].source_url || '';
          }
        } catch(e) { heroUrl = ''; }
        // construct inner HTML
        leftDiv.innerHTML = `
          <img class="hero" src="${heroUrl || placeholderDataURI(1200,800,'No Image')}" alt="hero">
          <div class="hero-overlay">
            <h2 class="hero-title"></h2>
            <div class="meta">
              <img class="hero-avatar" src="">
              <div class="hero-author"></div>
              <div style="margin-left:8px;color:#eee;opacity:.9" class="hero-date"></div>
            </div>
          </div>
        `;
        // hero category badge (ìš°ì¸¡ í•˜ë‹¨)
const catWrap = document.createElement('div');
catWrap.className = 'hero-cats';
if(leftPost._embedded && leftPost._embedded['wp:term'] && leftPost._embedded['wp:term'][0] && leftPost._embedded['wp:term'][0].length > 0) {
  const c = leftPost._embedded['wp:term'][0][0]; // ì²«ë²ˆì§¸ ì¹´í…Œê³ ë¦¬ë§Œ
  const span = document.createElement('span');
  span.className = 'cat-badge ' + pickCategoryClass(c.slug || c.name);
  span.textContent = c.name;
  catWrap.appendChild(span);
}
leftDiv.appendChild(catWrap);

        // fill title, author, date
        const heroTitle = leftDiv.querySelector('.hero-title');
        heroTitle.innerHTML = leftPost.title && leftPost.title.rendered ? leftPost.title.rendered : 'ì œëª© ì—†ìŒ';
        const heroAvatar = leftDiv.querySelector('.hero-avatar');
        const heroAuthor = leftDiv.querySelector('.hero-author');
        const heroDate = leftDiv.querySelector('.hero-date');

        if(leftPost._embedded && leftPost._embedded.author && leftPost._embedded.author[0]) {
          const a = leftPost._embedded.author[0];
          const av = (a.avatar_urls && (a.avatar_urls['96']||a.avatar_urls['48']||a.avatar_urls['24'])) ? (a.avatar_urls['48']||a.avatar_urls['24']) : '';
          heroAvatar.src = av || placeholderDataURI(48,48,'U');
          heroAuthor.textContent = (a.name || 'ìµëª…'); // ì´ë¦„ë§Œ í‘œì‹œ
        } else {
          heroAvatar.src = placeholderDataURI(48,48,'U');
          heroAuthor.textContent = 'ìµëª…';
        }
        heroDate.textContent = formatDate(leftPost.date);

        // auto adjust hero title color based on image luminance (try if CORS allows)
        adjustHeroContrast(leftDiv.querySelector('.hero'), heroTitle, leftDiv.querySelector('.hero-overlay'));

        leftDiv.addEventListener('click', ()=> openPostOverlayById(leftPost.id));
        row.appendChild(leftDiv);

        // right small stack: up to 4 items (group[1..4])
        const rightDiv = document.createElement('div');
        rightDiv.className = 'col-right';
        const smalls = group.slice(1,5);
        smalls.forEach(s => {
          const cardNode = createCardNode(s);
          rightDiv.appendChild(cardNode);
        });
        // if less than 4, fill with placeholders? not necessary.
        row.appendChild(rightDiv);

        container.appendChild(row);
        state.homeLoaded += group.length;
        if(state.homeLoaded >= HOME_MAX) {
          state.homeFinished = true;
          break;
        }
      }

      state.homePage += 1;
      if(state.homeLoaded >= HOME_MAX) {
        document.getElementById('homeLoading').textContent = '';
      } else {
        document.getElementById('homeLoading').textContent = '';
      }
    } catch(err) {
      console.error(err);
      document.getElementById('homeLoading').textContent = 'ë©”ì¸ ê¸€ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨';
    } finally {
      state.loadingHome = false;
    }
  }

  /* ===========================
     ì¹´í…Œê³ ë¦¬ ë¡œë“œ (í˜ì´ì§€ë„¤ì´ì…˜/ë¬´í•œìŠ¤í¬ë¡¤)
     =========================== */
  async function loadCategoryPage(slug) {
    if(!slug) return;
    if(state.categoryFinished[slug]) return;
    const nextPage = state.categoryPages[slug] || 1;
    document.getElementById('categoryLoading').textContent = 'ë¡œë”© ì¤‘...';
    try {
      const catId = CATEGORIES[slug];
      if(!catId) {
        document.getElementById('categoryLoading').textContent = 'ì•Œ ìˆ˜ ì—†ëŠ” ì¹´í…Œê³ ë¦¬ì…ë‹ˆë‹¤.';
        return;
      }
      const res = await fetch(api(`posts?categories=${catId}&per_page=10&page=${nextPage}`), { headers: headers() });
      if(!res.ok) {
        if(res.status === 400) {
          state.categoryFinished[slug] = true;
          document.getElementById('categoryLoading').textContent = 'ë” ì´ìƒ ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.';
          return;
        }
        throw new Error('category fetch failed: ' + res.status);
      }
      const posts = await res.json();
      if(!Array.isArray(posts) || posts.length === 0) {
        state.categoryFinished[slug] = true;
        document.getElementById('categoryLoading').textContent = 'ì•„ì§ ê²Œì‹œëœ ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.';
        return;
      }

      // render
      const grid = document.getElementById('categoryGrid');
      posts.forEach(p => {
        state.postsCache[p.id] = p;
        const card = createCardNode(p);
        grid.appendChild(card);
      });

      state.categoryPages[slug] = nextPage + 1;
      document.getElementById('categoryLoading').textContent = '';
    } catch(err) {
      console.error(err);
      document.getElementById('categoryLoading').textContent = 'ì¹´í…Œê³ ë¦¬ ê¸€ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨';
    }
  }

  /* ===========================
     í¬ìŠ¤íŠ¸ ì˜¤ë²„ë ˆì´ ë¡œë“œ (ë‹¨ê±´)
     =========================== */
  async function openPostOverlayById(id) {
    if(!id) return;
    // if cached and has content, use it
    const cached = state.postsCache[id];
    if(cached && cached.content && cached.content.rendered) {
      renderPostOverlay(cached);
      return;
    }
    try {
      const res = await fetch(api(`posts/${id}`), { headers: headers() });
      if(!res.ok) throw new Error('post fetch failed ' + res.status);
      const post = await res.json();
      // fetch again with _embed to get author/media included
      // Some endpoints may already include _embedded due to api() usage - ensure presence
      if(!(post._embedded && post._embedded.author)) {
        // try refetch with _embed param
        const res2 = await fetch(api(`posts/${id}?_embed`), { headers: headers() });
        if(res2.ok) {
          const post2 = await res2.json();
          state.postsCache[id] = post2;
          renderPostOverlay(post2);
          return;
        }
      }
      state.postsCache[id] = post;
      renderPostOverlay(post);
    } catch(err) {
      console.error(err);
      alert('í¬ìŠ¤íŠ¸ ë¡œë“œ ì‹¤íŒ¨ â€” ì›ë¬¸ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.');
      if(cached && cached.link) window.open(cached.link, '_blank');
    }
  }

  function renderPostOverlay(post) {
    // ensure _embedded author exists
    const overlay = document.getElementById('postOverlay');
    const article = document.getElementById('postArticle');
    const title = post.title && post.title.rendered ? post.title.rendered : 'ì œëª© ì—†ìŒ';
    const authorName = (post._embedded && post._embedded.author && post._embedded.author[0] && post._embedded.author[0].name) ? post._embedded.author[0].name : 'ìµëª…';
    const avatar = (post._embedded && post._embedded.author && post._embedded.author[0] && post._embedded.author[0].avatar_urls) ? (post._embedded.author[0].avatar_urls['96'] || post._embedded.author[0].avatar_urls['48']) : '';
    const categories = (post._embedded && post._embedded['wp:term'] && post._embedded['wp:term'][0]) ? post._embedded['wp:term'][0].map(t=>t.name).join(', ') : '-';
    const dateStr = formatDate(post.date);

    // Post content: use rendered HTML from WP; keep images responsive
    const contentHTML = post.content && post.content.rendered ? post.content.rendered : (post.excerpt && post.excerpt.rendered ? post.excerpt.rendered : '');

    article.innerHTML = `
      <h1>${title}</h1>
      <div class="post-meta" style="margin-bottom:14px;">
        <img src="${avatar || placeholderDataURI(96,96,'U')}" alt="author">
        <div style="display:flex;flex-direction:column">
          <div style="font-weight:800;color:#111">${authorName}</div>
          <div style="color:#666;font-size:13px">${dateStr} Â· ${categories}</div>
        </div>
      </div>
      <div class="post-content">${contentHTML}</div>
      <div style="margin-top:18px;color:#888;font-size:13px">ì›ë¬¸ ë§í¬: <a href="${post.link}" target="_blank" rel="noopener">${post.link}</a></div>
    `;

    // images responsive enforcement
    article.querySelectorAll('.post-content img').forEach(img=>{
      img.style.maxWidth = '100%';
      img.style.height = 'auto';
      img.style.display = 'block';
      img.style.margin = '12px 0';
    });

    overlay.classList.add('active');
    overlay.scrollTop = 0;
  }

  /* ===========================
     ê²€ìƒ‰ ê¸°ëŠ¥
     =========================== */
  async function doSearch(q) {
    if(!q) return;
    // show overlay
    ui.openSearch();
    const resultsGrid = document.getElementById('searchResults');
    resultsGrid.innerHTML = '';
    try {
      const res = await fetch(api(`posts?search=${encodeURIComponent(q)}&per_page=20`), { headers: headers() });
      if(!res.ok) throw new Error('search failed ' + res.status);
      const posts = await res.json();
      if(!Array.isArray(posts) || posts.length === 0) {
        resultsGrid.innerHTML = '<div style="padding:20px;color:#666">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</div>';
        return;
      }
      posts.forEach(p => {
        state.postsCache[p.id] = p;
        const card = createCardNode(p);
        resultsGrid.appendChild(card);
      });
    } catch(err) {
      console.error(err);
      resultsGrid.innerHTML = '<div style="padding:20px;color:#d00">ê²€ìƒ‰ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</div>';
    }
  }

  /* ===========================
     ì´ë¯¸ì§€ ëŒ€ë¹„ì— ë”°ë¥¸ í…ìŠ¤íŠ¸ ìƒ‰ìƒ ìë™í™”
     - ì‹œë„ ë°©ì‹: ì´ë¯¸ì§€ crossOrigin='anonymous'ë¡œ ìº”ë²„ìŠ¤ì— ê·¸ë ¤ í‰ê·  ë°ê¸° ì¸¡ì •
     - ë§Œì•½ CORS ë¬¸ì œë¡œ ì‹¤íŒ¨í•˜ë©´ ê¸°ë³¸ í°ìƒ‰ ê¸€ì ìœ ì§€
     =========================== */
  async function adjustHeroContrast(imgEl, titleEl, overlayEl) {
    // if imgEl src is empty, skip
    if(!imgEl || !imgEl.src) return;
    // create an Image with crossOrigin attempt
    const img = new Image();
    img.crossOrigin = "anonymous";
    img.src = imgEl.src;
    // if already loaded
    function setColors(isLight) {
      if(isLight) {
        titleEl.style.color = '#111';
        titleEl.style.textShadow = 'none';
        overlayEl.style.background = 'linear-gradient(0deg, rgba(255,255,255,0.85), rgba(255,255,255,0.35))';
      } else {
        titleEl.style.color = '#fff';
        titleEl.style.textShadow = '0 3px 12px rgba(0,0,0,0.45)';
        overlayEl.style.background = 'linear-gradient(180deg, rgba(0,0,0,0.0), rgba(0,0,0,0.45))';
      }
    }
    // attempt to analyze
    img.onload = function() {
      try {
        const canvas = document.createElement('canvas');
        // sample small to reduce cost
        const w = Math.min(200, img.width);
        const h = Math.min(120, img.height);
        canvas.width = w;
        canvas.height = h;
        const ctx = canvas.getContext('2d');
        ctx.drawImage(img, 0, 0, w, h);
        const data = ctx.getImageData(0,0,w,h).data;
        let r=0,g=0,b=0,count=0;
        for(let i=0;i<data.length;i+=4) {
          r += data[i];
          g += data[i+1];
          b += data[i+2];
          count++;
        }
        const avgR = r/count, avgG = g/count, avgB = b/count;
        // luminance formula
        const lum = 0.2126*avgR + 0.7152*avgG + 0.0722*avgB;
        // threshold ~ 150
        setColors(lum > 150);
      } catch(e) {
        // CORS or other issue -> fallback to dark overlay (white text)
        setColors(false);
      }
    };
    img.onerror = function() {
      // fallback: keep white
      setColors(false);
    };
  }

  /* ===========================
     ìœ í‹¸: ìŠ¤í¬ë¡¤ ì´ë²¤íŠ¸ ë°”ì¸ë”© (ë¬´í•œìŠ¤í¬ë¡¤)
     =========================== */
  function onScrollHandler() {
    const toTop = document.getElementById('toTopBtn');
    if(window.scrollY > 300) toTop.classList.add('show'); else toTop.classList.remove('show');

    // If category overlay open, load more category if near bottom
    const categoryOverlay = document.getElementById('categoryOverlay');
    if(categoryOverlay.classList.contains('active')) {
      // near bottom detection
      const scroller = categoryOverlay;
      if(scroller.scrollHeight - (scroller.scrollTop + scroller.clientHeight) < 300) {
        // load more for that slug (we store slug on overlay element)
        const slug = categoryOverlay.dataset.slug;
        if(slug) loadCategoryPage(slug);
      }
      return;
    }

    // If post overlay open, do nothing
    const postOverlay = document.getElementById('postOverlay');
    if(postOverlay.classList.contains('active')) return;

    // If search overlay open, do nothing
    const searchOverlay = document.getElementById('searchOverlay');
    if(searchOverlay.classList.contains('active')) return;

    // Home infinite scroll: when nearing bottom of body and not finished, load more
    if(!state.loadingHome && !state.homeFinished) {
      const bottomThreshold = 1200; // px from bottom
      if(window.innerHeight + window.scrollY >= document.body.offsetHeight - bottomThreshold) {
        loadHomeChunk();
      }
    }
  }

/* ===========================
   UI / Router proxies
   =========================== */
const ui = {
  toggleNav() {
    document.getElementById('navOverlay').classList.toggle('active');
  },

  openSearch() {
    document.getElementById('searchOverlay').classList.add('active');
    const input = document.querySelector('#searchOverlay .search-input');
    if (input) input.focus();

    history.pushState({ page: 'search' }, '', '#search');
    document.getElementById('navOverlay').classList.remove('active');
  },

  closeSearch() {
    document.getElementById('searchOverlay').classList.remove('active');
  },

  searchNow() {
    const overlayInput = document.querySelector('#searchOverlay.active .search-input');
    const navInput = document.querySelector('#navOverlay.active #globalSearchInput');
    const input = overlayInput || navInput;
    if (!input) { alert('ê²€ìƒ‰ì°½ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.'); return; }

    const q = input.value.trim();
    if (!q) { alert('ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”'); return; }

    doSearch(q);
    // ë‹«ì§€ ì•ŠìŒ
  }
};

// ì¹´í…Œê³ ë¦¬ë³„ ì„¤ëª… ë¬¸êµ¬
const CATEGORY_DESCRIPTIONS = {
  tech: "ìµœì‹  ê¸°ìˆ ê³¼ í˜ì‹  íŠ¸ë Œë“œë¥¼ ë‹¤ë£¹ë‹ˆë‹¤.",
  eat: "ë‹¤ì–‘í•œ ìŒì‹ ë¬¸í™”ì™€ ë§›ì§‘ì„ ì†Œê°œí•©ë‹ˆë‹¤.",
  style: "íŒ¨ì…˜, ë·°í‹°, ë¼ì´í”„ìŠ¤íƒ€ì¼ì„ íƒêµ¬í•©ë‹ˆë‹¤.",
  culture: "ë¬¸í™”, ì˜ˆìˆ , ì‚¬íšŒ í˜„ìƒì„ ë¶„ì„í•©ë‹ˆë‹¤.",
  life: "ì¼ìƒê³¼ ê²½í—˜ì—ì„œ ì–»ì€ í†µì°°ì„ ë‚˜ëˆ•ë‹ˆë‹¤.",
  "editors-pick": "ì—ë””í„°ê°€ ì§ì ‘ ì—„ì„ í•œ ê¸€ ëª¨ìŒì…ë‹ˆë‹¤."
};

const router = {
  goHome() {
    document.querySelectorAll('.category-overlay, .post-overlay, .about-page, .search-overlay')
      .forEach(el => el.classList.remove('active'));
    window.scrollTo({ top: 0, behavior: 'smooth' });

    history.pushState({ page: 'home' }, '', '/');
  },

  openCategory(slug) {
    const overlay = document.getElementById('categoryOverlay');
    overlay.dataset.slug = slug;
    overlay.classList.add('active');
    overlay.scrollTop = 0;

    // âœ… ì œëª©ê³¼ ì„¤ëª… ì—…ë°ì´íŠ¸
    document.getElementById('categoryOverlayTitle').textContent = slug.toUpperCase();
    document.getElementById('categoryOverlaySubtitle').textContent =
      CATEGORY_DESCRIPTIONS[slug] || "ì¹´í…Œê³ ë¦¬ ì½˜í…ì¸ ";

    // âœ… ì´ˆê¸°í™” í›„ ê¸€ ë¶ˆëŸ¬ì˜¤ê¸°
    state.categoryPages[slug] = 1;
    state.categoryFinished[slug] = false;
    document.getElementById('categoryGrid').innerHTML = '';
    loadCategoryPage(slug);

    history.pushState({ page: 'category', slug }, '', `#category-${slug}`);
    document.getElementById('navOverlay').classList.remove('active');
  },

  closeCategory() {
    const overlay = document.getElementById('categoryOverlay');
    overlay.classList.remove('active');
    delete overlay.dataset.slug;
  },

  openPost(post) {
    if (post && post.id) {
      state.postsCache[post.id] = post;
      renderPostOverlay(post);
      history.pushState({ page: 'post', id: post.id }, '', `#post-${post.id}`);
      document.getElementById('navOverlay').classList.remove('active');
    }
  },

  closePost() {
    document.getElementById('postOverlay').classList.remove('active');
  },

  openAbout() {
    document.getElementById('aboutPageSection').classList.add('active');
    history.pushState({ page: 'about' }, '', '#about');
    document.getElementById('navOverlay').classList.remove('active');
  },

  closeAbout() {
    document.getElementById('aboutPageSection').classList.remove('active');
  }
};



  /* ===========================
     ì´ˆê¸°í™” & ì´ë²¤íŠ¸ ë°”ì¸ë”©
     =========================== */
  function bindEvents() {
  // =======================
  // ë„¤ë¹„ê²Œì´ì…˜ ë¦¬ìŠ¤íŠ¸ ë Œë”ë§
  // =======================
  renderNavList();

  // =======================
  // ê²€ìƒ‰ ë²„íŠ¼ (ê²€ìƒ‰ ì˜¤ë²„ë ˆì´ ì•ˆ)
  // =======================
  const searchBtn = document.getElementById('globalSearchBtn');
  if (searchBtn) {
    searchBtn.addEventListener('click', (e) => {
      e.preventDefault();   // í¼ ì œì¶œ ë°©ì§€ (ë‹«í˜ ë°©ì§€)
      ui.searchNow();       // ê²€ìƒ‰ ì‹¤í–‰
    });
  }

// =======================
// ë„¤ë¹„ ì˜¤ë²„ë ˆì´ ì•ˆ ê²€ìƒ‰ì°½ (ë”ë³´ê¸° ì•ˆ)
// =======================
const navSearchInput = document.getElementById('globalSearchInput');
if (navSearchInput) {
  navSearchInput.addEventListener('keydown', (e) => {
    if (e.key === 'Enter') {
      e.preventDefault();
      const q = e.target.value.trim();
      if (!q) { alert('ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”'); return; }
      
      // âœ… ë„¤ë¹„ ë‹«ê³  ê²€ìƒ‰ ì‹¤í–‰
      document.getElementById('navOverlay').classList.remove('active');
      doSearch(q);  // ê²€ìƒ‰ ì‹¤í–‰ â†’ ìë™ìœ¼ë¡œ searchOverlay ì—´ë¦¼
    }
  });
}


  // =======================
  // ê²€ìƒ‰ ì˜¤ë²„ë ˆì´ ì•ˆ ê²€ìƒ‰ì°½ (Enter ì…ë ¥)
  // =======================
  const searchOverlayInput = document.querySelector('.search-overlay .search-input');
  if (searchOverlayInput) {
    searchOverlayInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        e.preventDefault(); // ì¤‘ë³µ ë°©ì§€
        const q = e.target.value.trim();
        if (!q) { alert('ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”'); return; }
        doSearch(q);      // ê²€ìƒ‰ ì‹¤í–‰
      }
    });
  }

  // =======================
  // to top ë²„íŠ¼
  // =======================
  const toTopBtn = document.getElementById('toTopBtn');
  if (toTopBtn) {
    toTopBtn.addEventListener('click', () =>
      window.scrollTo({ top: 0, behavior: 'smooth' })
    );
  }

  // =======================
  // ìŠ¤í¬ë¡¤ ì´ë²¤íŠ¸
  // =======================
  window.addEventListener('scroll', onScrollHandler, { passive: true });

  // =======================
  // ESC í‚¤ë¡œ ëª¨ë“  ì˜¤ë²„ë ˆì´ ë‹«ê¸°
  // =======================
  window.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      document.getElementById('navOverlay').classList.remove('active');
      document.getElementById('searchOverlay').classList.remove('active');
      document.getElementById('categoryOverlay').classList.remove('active');
      document.getElementById('postOverlay').classList.remove('active');
      document.getElementById('aboutPageSection').classList.remove('active');
    }
  });
}




/* ====== ì•„ë˜ ë¸”ë¡ìœ¼ë¡œ ê¸°ì¡´ ì¤‘ë³µëœ íˆìŠ¤í† ë¦¬/íŒìŠ¤í…Œì´íŠ¸ ë¸”ë¡ì„ ëŒ€ì²´í•˜ì„¸ìš” ====== */

/* íˆìŠ¤í† ë¦¬/íŒìŠ¤í…Œì´íŠ¸ ì¼ì›í™” ì²˜ë¦¬
   - router ê°ì²´ë¥¼ ë‹¨ì¼ ì§„ì…ì ìœ¼ë¡œ ì‚¬ìš©
   - popstateì—ì„œ slug/id ëª¨ë‘ ì²˜ë¦¬ (ë’¤ë¡œê°€ê¸°/ì•ìœ¼ë¡œê°€ê¸°ì— ëŒ€ì‘)
*/
(function setupHistoryHandlers() {
  // ì „ì—­ ë‹¨ì¶• ë˜í¼ (ì´ë¯¸ routerê°€ ìˆìœ¼ë¯€ë¡œ ê°„ë‹¨íˆ ìœ„ì„)
  window.openAbout = function() { router.openAbout(); };
  window.openCategory = function(catSlug) { router.openCategory(catSlug); };
  window.openSearch = function() { router.openSearch(); };
  window.openPost = function(postIdOrObj) {
    // router.openPost expects a post object; if given id, try to use cache then fetch via openPostOverlayById
    if (!postIdOrObj) return;
    if (typeof postIdOrObj === 'number') {
      openPostOverlayById(postIdOrObj);
    } else if (postIdOrObj.id) {
      router.openPost(postIdOrObj);
    }
  };

  // popstate í•œ ë²ˆìœ¼ë¡œ ì§‘ì¤‘ ì²˜ë¦¬
  window.addEventListener('popstate', function(event) {
    // ë‹«ì•„ì•¼ í•  ëª¨ë“  ì˜¤ë²„ë ˆì´ ë‹«ê¸°
    document.querySelectorAll('.about-page, .category-overlay, .search-overlay, .post-overlay')
      .forEach(el => el.classList.remove('active'));

    // event.stateì´ ìˆìœ¼ë©´ ê·¸ì— ë”°ë¼ ì—°ë‹¤
    if (event.state && event.state.page) {
      const pg = event.state.page;
      if (pg === 'about') {
        document.getElementById('aboutPageSection').classList.add('active');
      } else if (pg === 'search') {
        document.getElementById('searchOverlay').classList.add('active');
      } else if (pg === 'category') {
        // ìƒíƒœì— slugê°€ ìˆìœ¼ë©´ ì‚¬ìš©, ì—†ìœ¼ë©´ idë¥¼ ì‹œë„
        const slug = event.state.slug || event.state.id || null;
        if (slug) {
          // slugê°€ ìˆ«ì(id)ì²˜ëŸ¼ ë³´ì´ë©´ ë¬´ì‹œí•˜ê³  ë¬¸ìì—´ë¡œ í•´ì„í•˜ë ¤ë©´ ë³€í™˜ ë¡œì§ í•„ìš”
          // ì—¬ê¸°ì„œëŠ” ê¸°ì¡´ router.openCategoryë¥¼ ì‚¬ìš© (router.openCategory expects slug)
          router.openCategory(String(slug));
        } else {
          // ì•ˆì „í•˜ê²Œ í™ˆ ë³µê·€
          window.scrollTo({ top: 0, behavior: 'smooth' });
        }
      } else if (pg === 'post') {
        const pid = event.state.id;
        if (pid) {
          // post overlay ì—´ê¸° (idë¡œ)
          openPostOverlayById(pid);
        }
      } else if (pg === 'home') {
        // í™ˆ ë³µê·€
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }
    } else {
      // ìƒíƒœê°€ ì—†ìœ¼ë©´ ê¸°ë³¸ ë™ì‘: í™ˆ(ëª¨ë“  ì˜¤ë²„ë ˆì´ ë‹«ê³  ìƒë‹¨ìœ¼ë¡œ)
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
  }, false);
})();



  /* ===========================
     ì´ˆê¸° ë¡œë“œ
     =========================== */
  (function init() {
    bindEvents();
    // first load: home
    loadHomeChunk();

    // also, pre-render nav order links etc.
    renderNavList();
  })();

 
  </script>

</body>
</html>
