<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>IMPACT — MAKE A IMPACT</title>
  <meta name="description" content="IMPACT — 학생 저자 콘텐츠 통합 플랫폼 (테스트용 정적 샘플) - 카테고리/포스트/검색/ABOUT/EDITORS 포함" />
  <link rel="icon" href="logo.png" type="image/png">

  <!-- ===========================
       스타일 시트 (CSS)
       - 이 블록은 전체 레이아웃, 반응형, 접근성, 컴포넌트 스타일을 포함합니다.
       - 주석을 넉넉하게 넣어 문서 길이를 확보했습니다.
     =========================== -->
  <style>
  /* ===================================================================
     RESET & 기초 스타일
     - 모든 주요 브라우저에서 예측 가능한 기본 스타일을 만듭니다.
     - 모바일에서 좌우 스크롤 발생을 막기 위해 overflow-x를 숨김 처리합니다.
     =================================================================== */
  *, *::before, *::after { box-sizing: border-box; }
  html, body { height: 100%; width: 100%; }
  body {
    margin: 0;
    font-family: "Noto Sans KR", "Apple SD Gothic Neo", "Segoe UI", Roboto, Arial, sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    background: #f6f7f9;
    color: #111;
    line-height: 1.6;
    overflow-x: hidden; /* 모바일 가로 확장 방지 */
  }
  img { display:block; max-width:100%; height:auto; }
  a { color:inherit; text-decoration:none; }

  /* ===========================
     유틸리티
     =========================== */
  .wrap { max-width: 1400px; margin: 0 auto; padding: 0 20px; }
  .hidden { display:none !important; }
  .visually-hidden {
    position: absolute !important; height: 1px; width: 1px; overflow: hidden; clip: rect(1px,1px,1px,1px); white-space: nowrap;
  }
  .flex { display:flex; }
  .center { display:flex; align-items:center; justify-content:center; }

  /* ===========================
     HEADER
     - 상단 고정(header sticky)
     - 좌측 로고, 우측 검색/메뉴 버튼
     - 검색 버튼은 아이콘(돋보기)로 출력합니다.
     =========================== */
  header.header {
    position: sticky; top: 0; z-index: 1200;
    background: #fff; border-bottom: 1px solid rgba(0,0,0,0.06);
    backdrop-filter: blur(6px);
  }
  .header-inner {
    height: 72px; display:flex; align-items:center; justify-content:space-between; gap:12px;
    max-width:1400px; margin:0 auto; padding: 0 20px;
  }
  .brand { display:flex; gap:12px; align-items:center; }
  .brand .logo { display:flex; gap:8px; align-items:center; font-weight:900; font-size:26px; cursor:pointer; }
  .brand .logo small { font-size:11px; color:#777; font-weight:800; display:block; line-height:1; }

  .header-actions { display:flex; gap:8px; align-items:center; }
  .btn {
    border-radius:10px; background:#fff; padding:8px 12px; border:1px solid rgba(0,0,0,0.08);
    font-weight:700; font-size:14px; cursor:pointer; transition: transform .12s ease, box-shadow .12s ease;
  }
  .btn:active { transform: translateY(1px); }
  .btn.primary { background: linear-gradient(135deg,#2e8b57,#1f7a6f); color:#fff; border:none; }

  /* 검색 아이콘 스타일: 버튼 텍스트 대신 아이콘만 사용 */
  .btn.search { width:50px; height:40px; display:flex; align-items:center; justify-content:center; font-size:18px; }

  /* ===========================
     NAV OVERLAY (더보기)
     - 데스크탑: 오른쪽 50% 슬라이드
     - 모바일(<=680px): 전체 화면 처리
     - 닫기 버튼(X)는 상단 우측에 위치
     =========================== */
  .nav-overlay {
    position: fixed; top: 0; right: -50%; width: 50%; height: 100vh; background: rgba(255,255,255,0.98);
    z-index: 2200; transition: right 0.32s cubic-bezier(.2,.9,.2,1); display:flex; flex-direction:column; padding: 64px 40px;
    box-shadow: -6px 0 40px rgba(0,0,0,0.08);
  }
  .nav-overlay.active { right: 0; }
  .nav-close { position:absolute; top:28px; right:28px; background:none; border:none; font-size:28px; cursor:pointer; }
  .nav-search { display:flex; align-items:center; gap:10px; margin-bottom:36px; }
  .nav-search input[type="search"] {
    flex:1; border:none; border-bottom:2px solid #111; padding:10px 8px; outline:none; font-weight:700; font-size:16px; background:transparent;
  }
  .nav-list { list-style:none; padding:0; margin:0 0 24px; display:flex; flex-direction:column; gap:18px; }
  .nav-list li { font-size:28px; font-weight:900; cursor:pointer; color:#111; transition: color .16s ease; }
  .nav-list li:hover { color:#2e8b57; }
  .nav-footer-links { margin-top:auto; display:flex; gap:12px; align-items:center; font-weight:800; }
  .nav-footer-links a { color:#111; font-size:13px; }

  @media (max-width:680px) {
    .nav-overlay { right:0; left:0; width:100%; padding:32px; }
    .nav-close { top:18px; right:18px; }
  }

  /* ===========================
     MAIN / HOME LAYOUT
     - 메인 홈은 'row'가 반복되어 나옴
     - 각 row: 왼쪽은 2개의 큰 포스트(세로로 쌓임), 오른쪽은 4개의 작은 카드(세로로)
     - 20개까지 로드
     =========================== */
  .home { max-width:1400px; margin: 28px auto; display:flex; flex-direction:column; gap:28px; padding: 0 20px 100px; }
  .row { display:grid; grid-template-columns: 2fr 1fr; gap:20px; align-items:start; }
  .col-left { position:relative; border-radius:12px; overflow:hidden; background:#eee; cursor:pointer; display:flex; flex-direction:column; gap:12px; }
  .big-card { background:#fff; border-radius:10px; overflow:hidden; border:1px solid rgba(0,0,0,0.06); display:flex; flex-direction:column; }
  .big-card .thumb { width:100%; height:220px; object-fit:cover; display:block; }
  .big-card .card-body { padding:14px; }
  .big-card h3 { font-size:20px; margin:0 0 8px; font-weight:800; }
  .big-card p { color:#333; font-size:14px; margin:0; }

  .col-right { display:flex; flex-direction:column; gap:12px; }
  .small-card { background:#fff; border-radius:10px; overflow:hidden; border:1px solid rgba(0,0,0,0.06); display:flex; gap:12px; align-items:center; padding:10px; }
  .small-card img { width:100px; height:72px; object-fit:cover; border-radius:8px; flex-shrink:0; }
  .small-card .meta { display:flex; flex-direction:column; gap:6px; }
  .small-card h4 { margin:0; font-size:15px; font-weight:800; }
  .small-card p { margin:0; color:#666; font-size:13px; }

  /* 모바일에서 1열 스택으로 변경 */
  @media (max-width:1100px) {
    .row { grid-template-columns: 1fr; }
    .col-right { grid-auto-rows: unset; grid-template-columns: 1fr; display:grid; gap:12px; }
  }

  /* ===========================
     OVERLAY (CATEGORY, POST, SEARCH, ABOUT, EDITORS)
     - 오버레이는 전체화면 흰 배경으로 구현, 내부에 닫기 버튼 포함
     - post overlay는 공유 버튼과 원문 열기 버튼 포함
     =========================== */
  .overlay-full { display:none; position:fixed; inset:0; background:#fff; z-index:2000; overflow:auto; padding:28px; animation: overlayIn .28s ease; }
  .overlay-full.active { display:block; }
  @keyframes overlayIn { from { opacity:0; transform: translateY(6px); } to { opacity:1; transform: translateY(0); } }

  .overlay-top { display:flex; justify-content:space-between; align-items:center; gap:12px; border-bottom:1px solid rgba(0,0,0,0.06); padding-bottom:12px; }
  .overlay-title { font-size:24px; font-weight:900; color:#111; }
  .overlay-grid { margin-top:18px; display:grid; gap:18px; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); padding:20px 0 80px; }
  .post-article { margin:0 auto; max-width:900px; }
  .post-article h1 { font-size:34px; font-weight:900; margin-bottom:12px; color:#111; }
  .post-content { color:#222; line-height:1.9; }

  /* ===========================
     SEARCH BAR
  =========================== */
  .search-bar { display:flex; align-items:center; background:#fff; border-radius:50px; box-shadow:0 6px 20px rgba(0,0,0,0.06); padding:6px 10px; gap:8px; }
  .search-bar input[type="search"] { flex:1; border:none; outline:none; font-size:16px; padding:12px 14px; border-radius:50px; }
  .search-bar .search-btn { background:#111; color:#fff; border:none; padding:10px 14px; border-radius:50px; font-weight:800; cursor:pointer; display:flex; align-items:center; justify-content:center; }
  .search-bar .close-btn { background:none; border:none; font-size:20px; cursor:pointer; color:#666; }

  /* 검색 버튼: 아이콘 사용 (돋보기) */
  .search-icon { font-size:18px; }

  /* ===========================
     FOOTER
  =========================== */
  footer.site-footer { background:#111; color:#eee; padding:40px 20px; margin-top:20px; }
  .footer-inner { max-width:1400px; margin:0 auto; display:flex; justify-content:space-between; gap:20px; align-items:flex-start; flex-wrap:wrap; }
  .footer-brand { font-size:40px; font-weight:900; color:#fff; font-style:italic; }
  .footer-links a { color:#ddd; }

  /* ===========================
     EDITORS GRID
  =========================== */
  .editors-grid { display:flex; gap:12px; flex-wrap:wrap; margin-top:18px; }
  .editor-card { width:140px; background:#fff; border:1px solid rgba(0,0,0,0.06); border-radius:10px; padding:12px; text-align:center; cursor:pointer; }
  .editor-card img { width:80px; height:80px; border-radius:50%; object-fit:cover; margin:0 auto 10px; display:block; }
  .editor-name { font-weight:800; font-size:14px; }

  /* ===========================
     SMALL ADJUSTMENTS (모바일)
  =========================== */
  @media (max-width:480px) {
    .header-inner { height:60px; padding: 0 12px; }
    .brand .logo { font-size:18px; }
    .big-card .thumb { height:160px; }
  }

  /* ===========================
     END OF CSS
  =========================== */
  </style>
</head>
<body>

  <!-- ===========================
       HEADER
     =========================== -->
  <header class="header" id="siteHeader" role="banner" aria-label="사이트 헤더">
    <div class="header-inner wrap">
      <div class="brand" role="img" aria-label="IMPACT brand">
        <div class="logo" id="logoBtn" onclick="router.goHome()" tabindex="0" title="IMPACT — go home">
          <img src="logo.png" alt="IMPACT logo" style="width:36px;height:36px;border-radius:8px;object-fit:cover;">
          <div>
            <div style="line-height:1">IMPACT</div>
            <small>MAKE A IMPACT</small>
          </div>
        </div>
      </div>

      <div class="header-actions" role="navigation" aria-label="상단 메뉴">
        <!-- 검색 버튼: 아이콘 형태로 고정 -->
        <button class="btn search" id="topSearchBtn" onclick="openNavlessSearch()" aria-label="검색">🔍</button>
        <button class="btn" aria-controls="navOverlay" aria-expanded="false" onclick="ui.toggleNav()" aria-label="더보기">더보기</button>
      </div>
    </div>
  </header>

  <!-- ===========================
       NAV OVERLAY
     =========================== -->
  <aside class="nav-overlay" id="navOverlay" aria-hidden="true" aria-label="카테고리 네비게이션">
    <button class="nav-close" aria-label="네비 닫기" id="navCloseBtn">×</button>
    <div style="display:flex;flex-direction:column;gap:12px;">
      <div class="nav-search" role="search" aria-label="네비 검색">
        <span style="font-size:18px">🔍</span>
        <input type="search" id="globalNavSearch" placeholder="검색어 입력" aria-label="네비 검색어">
      </div>

      <ul class="nav-list" id="navList" role="menu" aria-label="카테고리 목록">
        <!-- JS에서 채움 -->
      </ul>

      <div class="nav-footer-links" aria-hidden="false">
        <a href="javascript:void(0)" onclick="ui.toggleNav(); router.openAbout()">ABOUT</a>
        <a href="javascript:void(0)" onclick="ui.toggleNav(); router.openEditors()">EDITORS</a>
        <a href="javascript:void(0)" onclick="alert('NEWSLETTER 페이지는 추후 구현됩니다')">NEWSLETTER</a>
        <a href="https://www.instagram.com/ceo_impact_official" target="_blank" rel="noopener">INSTAGRAM</a>
      </div>

      <div class="nav-extra" style="margin-top:18px;color:#777;font-size:13px">
        IMPACT는 WordPress 기반으로 콘텐츠를 받아와 사이트 내에서 자체 포스트 페이지로 표시합니다.
      </div>
    </div>
  </aside>

  <!-- ===========================
       MAIN HOME
     =========================== -->
  <main class="home" id="home" role="main" aria-live="polite" tabindex="-1">
    <!-- rowsContainer에 JS가 row들을 추가합니다 -->
    <div id="rowsContainer" aria-live="polite"></div>
    <div id="homeLoading" style="text-align:center;color:#666;padding:36px 0">로딩 중...</div>
  </main>

  <!-- ===========================
       CATEGORY OVERLAY
     =========================== -->
  <section class="overlay-full category-overlay" id="categoryOverlay" aria-hidden="true" role="region">
    <div class="wrap">
      <div class="overlay-top">
        <div>
          <div class="overlay-title" id="categoryOverlayTitle">CATEGORY</div>
          <div class="category-sub" id="categoryOverlaySubtitle">카테고리 설명</div>
        </div>
        <div>
          <button class="btn" id="categoryCloseBtn">닫기</button>
        </div>
      </div>

      <div class="overlay-grid" id="categoryGrid" aria-live="polite"></div>
      <div id="categoryLoading" style="text-align:center;color:#666;padding:28px 0"></div>
    </div>
  </section>

  <!-- ===========================
       POST OVERLAY
     =========================== -->
  <article class="overlay-full post-overlay" id="postOverlay" aria-hidden="true" role="article">
    <div style="width:100%;max-width:1200px;margin:0 auto;">
      <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;margin-bottom:18px">
        <div>
          <button class="btn" id="postCloseBtn">닫기</button>
        </div>
        <div style="display:flex;gap:8px">
          <button class="btn" id="sharePostBtn">🔗 공유</button>
          <button class="btn" id="openOriginalBtn">원문 보기</button>
        </div>
      </div>
      <div class="post-article" id="postArticle"></div>
    </div>
  </article>

  <!-- ===========================
       SEARCH OVERLAY
     =========================== -->
  <section class="overlay-full search-overlay" id="searchOverlay" aria-hidden="true" role="search">
    <div class="wrap" style="max-width:1100px;margin:0 auto;">
      <div class="overlay-top">
        <div class="overlay-title">검색</div>
        <div><button class="btn" id="searchCloseBtn">닫기</button></div>
      </div>

      <div style="margin-top:18px">
        <div class="search-bar" role="search" aria-label="사이트 검색">
          <input type="search" class="search-input" id="searchInputTop" placeholder="검색어 입력 (Enter로 검색)" aria-label="검색어">
          <button type="button" class="search-btn" id="globalSearchBtn">🔍</button>
          <button type="button" class="close-btn" id="searchOverlayClose">×</button>
        </div>
      </div>

      <div id="searchResults" class="overlay-grid" aria-live="polite"></div>
    </div>
  </section>

  <!-- ===========================
       ABOUT PAGE
     =========================== -->
  <section class="overlay-full about-page" id="aboutPageSection" aria-hidden="true" role="region">
    <div class="wrap about-content">
      <div class="overlay-top">
        <div>
          <div class="overlay-title">ABOUT</div>
          <div style="color:#333;font-size:15px;line-height:1.8">
            <p><strong>IMPACT</strong> 은 現 & 前 KAIST IP-CEO 학생들과 POSTECH CEO 학생들이 함께 작성하는 심층 콘텐츠 플랫폼입니다.</p>
            <p>학생 저자들의 경험과 분석을 바탕으로 기술·경영·창의성을 결합한 글을 제공합니다. 현장의 사례, 데이터 인텔리전스, 깊이 있는 분석을 통해 독자에게 통찰을 전달합니다.</p>
          </div>
        </div>
        <div><button class="btn" id="aboutCloseBtn">닫기</button></div>
      </div>

      <div style="margin-top:20px">
        <h3>핵심 키워드</h3>
        <ul>
          <li><strong>Innovation</strong> — 혁신</li>
          <li><strong>Management</strong> — 관리</li>
          <li><strong>Passion</strong> — 열정</li>
          <li><strong>Acceleration</strong> — 혁신 가속화</li>
          <li><strong>Creativity</strong> — 창의성</li>
          <li><strong>Technology</strong> — 기술</li>
        </ul>

        <h3 style="margin-top:18px">MAKE A IMPACT</h3>
        <p>우리는 기술과 경영, 창의성과 열정을 융합하여 혁신을 가속화합니다. 학생 저자의 시선에서 사회와 산업, 그리고 사람들에게 의미 있는 임팩트를 만들어 나갑니다.</p>
      </div>
    </div>
  </section>

  <!-- ===========================
       EDITORS OVERLAY & EDITOR PAGE
     =========================== -->
  <section class="overlay-full editors-overlay" id="editorsOverlay" aria-hidden="true" role="region">
    <div class="wrap">
      <div class="overlay-top">
        <div>
          <div class="overlay-title">EDITORS</div>
          <div class="overlay-sub" id="editorsSubtitle">등록된 에디터 프로필</div>
        </div>
        <div><button class="btn" id="editorsCloseBtn">닫기</button></div>
      </div>

      <div id="editorsGrid" class="editors-grid"></div>
      <div id="editorPostsContainer" style="margin-top:24px"></div>
    </div>
  </section>

  <!-- ===========================
       TO TOP
     =========================== -->
  <button class="to-top" id="toTopBtn" title="맨 위로" aria-label="맨 위로">↑</button>

  <!-- ===========================
       FOOTER
     =========================== -->
  <footer class="site-footer" role="contentinfo" aria-label="사이트 푸터">
    <div class="wrap footer-inner">
      <div>
        <div class="footer-brand">IMPACT</div>
        <div style="margin-top:10px;color:#ddd;font-size:13px">광고 제휴 문의 | <a href="mailto:ceo.impact.official@gmail.com">ceo.impact.official@gmail.com</a></div>
        <div style="color:#ddd;font-size:13px;margin-top:6px">보도자료 | <a href="mailto:ceo.impact.official@gmail.com">ceo.impact.official@gmail.com</a></div>
      </div>

      <div class="footer-links">
        <a href="javascript:void(0)" onclick="router.openAbout()">ABOUT</a>
        <a href="javascript:void(0)" onclick="router.openEditors()">EDITORS</a>
        <a href="javascript:void(0)" onclick="alert('NEWSLETTER 페이지는 추후 구현됩니다')">NEWSLETTER</a>
        <a href="https://www.instagram.com/ceo_impact_official" target="_blank" rel="noopener">INSTAGRAM</a>
      </div>

      <div class="footer-right">
        <div style="font-weight:800;color:#fff">IMPACT CEO. ALL RIGHTS RESERVED.</div>
        <div style="color:#999;font-size:13px;margin-top:10px">사이트는 WordPress.com API로부터 콘텐츠를 가져옵니다.</div>
      </div>
    </div>
  </footer>

  <!-- ===========================
       CARD TEMPLATE
     =========================== -->
  <template id="cardTpl">
    <article class="small-card" role="article">
      <img src="" alt="">
      <div class="meta">
        <div class="title"></div>
        <div class="meta-sub"></div>
      </div>
    </article>
  </template>

  <!-- ===========================
       자바스크립트
       - 라우터, 데이터(샘플), 렌더링, 이벤트 바인딩, 공유, 검색 등 구현
       - 주석을 많이 넣어 문서 길이 확보
     =========================== -->
  <script>
  /**************************************************************************
   * IMPACT — Full JavaScript (Client)
   * - 이 스크립트는 데모/샘플 데이터로 동작합니다.
   * - 실제 WordPress API를 사용하려면 api() 함수를 수정해 서버측 프록시를 호출하세요.
   *
   * 주요 기능:
   * - 홈: 2 big + 4 small 패턴을 반복하여 최대 20개 게시물 렌더링
   * - 카테고리 오버레이: 카테고리별 글 목록
   * - 포스트 오버레이: 포스트 본문 표시, 공유, 원문 보기
   * - 검색: 검색 오버레이, 결과 클릭 시 포스트 열기
   * - 에디터(EDITORS): 프로필 목록 및 각 에디터 전용 페이지 (오버레이)
   * - 라우팅: 해시 기반 (#post-{id}, #about, #editors, #editor-{id}, #category-{slug})
   * - 모바일 가로 스크롤 방지 및 이미지 대비 조정 (간단)
   *
   * 보안 노트:
   * - Access token 등 민감정보는 클라이언트에 넣지 마세요.
   * - Netlify Functions 또는 다른 서버사이드 프록시를 사용해서 API 호출을 해야 안전합니다.
   **************************************************************************/

  /* ===========================
     설정
  =========================== */
  const HOME_MAX = 20; // 홈에 표시할 최대 게시물 수
  const HOME_CHUNK_SIZE = 6; // 한 번에 그룹(2 big + 4 small) = 6개

  /* ===========================
     샘플 데이터 (20개 포스트 + 에디터 6명)
     - 실제 서비스에서는 이 부분을 API 호출로 대체
  =========================== */
  const DEMO_EDITORS = [
    { id: 1, name: "김에디터", avatar: "https://i.pravatar.cc/96?img=12" },
    { id: 2, name: "박에디터", avatar: "https://i.pravatar.cc/96?img=8" },
    { id: 3, name: "이에디터", avatar: "https://i.pravatar.cc/96?img=5" },
    { id: 4, name: "최에디터", avatar: "https://i.pravatar.cc/96?img=3" },
    { id: 5, name: "정에디터", avatar: "https://i.pravatar.cc/96?img=10" },
    { id: 6, name: "송에디터", avatar: "https://i.pravatar.cc/96?img=20" }
  ];

  const DEMO_POSTS = (function genPosts(){
    const arr = [];
    const cats = ["Tech","Life","Culture","Style","Eat","Editors' Pick"];
    for(let i=1;i<=20;i++){
      const editor = DEMO_EDITORS[(i-1) % DEMO_EDITORS.length];
      arr.push({
        id: 1000 + i,
        date: new Date(Date.now() - i*86400000).toISOString(),
        title: { rendered: `데모 게시물 ${i}` },
        excerpt: { rendered: `<p>데모 요약 ${i} — 이 글은 샘플 콘텐츠입니다.</p>` },
        content: { rendered: `<p>데모 본문 ${i}. 상세 콘텐츠가 여기에 들어갑니다. 이미지, 표, 코드 블록 등 다양한 HTML 요소를 포함할 수 있습니다.</p><p>추가 문단: 이 부분은 글의 예시입니다.</p><img src="https://picsum.photos/900/400?random=${i}" alt="demo image">` },
        link: `https://example.com/posts/${1000+i}`,
        _embedded: {
          author: [{ id: editor.id, name: editor.name, avatar_urls: { "48": editor.avatar } }],
          'wp:featuredmedia': [{ source_url: `https://picsum.photos/1200/600?random=${i}` }],
          'wp:term': [[{ id: i%6, name: cats[i%6], slug: cats[i%6].toLowerCase().replace(/'| /g,'-') }]]
        }
      });
    }
    return arr;
  })();

  /* 상태 저장소 */
  const state = {
    postsCache: {}, // id -> post
    homeIndex: 0,   // 현재 홈에서 렌더링된 포스트 개수
    editors: {},    // editorId -> {id,name,avatar,posts:[]}
  };

  /* ===========================
     유틸 함수
  =========================== */
  function formatDate(dstr){
    try {
      const d = new Date(dstr);
      const y = d.getFullYear();
      const m = String(d.getMonth()+1).padStart(2,'0');
      const dd = String(d.getDate()).padStart(2,'0');
      return `${y}. ${m}. ${dd}.`;
    } catch(e){ return ''; }
  }

  function placeholderDataURI(w=600,h=300,txt='No Image'){
    const svg = `<svg xmlns='http://www.w3.org/2000/svg' width='${w}' height='${h}'><rect width='100%' height='100%' fill='#efefef'/><text x='50%' y='50%' fill='#aaa' font-size='20' text-anchor='middle' dominant-baseline='middle'>${txt}</text></svg>`;
    return 'data:image/svg+xml;charset=UTF-8,' + encodeURIComponent(svg);
  }

  function pickCategoryClass(nameOrSlug){
    if(!nameOrSlug) return '';
    const s = String(nameOrSlug).toLowerCase();
    if(s.includes('tech')) return 'cat-tech';
    if(s.includes('eat')) return 'cat-eat';
    if(s.includes('style')) return 'cat-style';
    if(s.includes('culture')) return 'cat-culture';
    if(s.includes('life')) return 'cat-life';
    if(s.includes('editor')) return 'cat-editors-pick';
    return '';
  }

  /* ===========================
     NAV 렌더링 (카테고리 목록)
  =========================== */
  const NAV_CATEGORIES = ["TECH","EAT","STYLE","CULTURE","LIFE","EDITORS' PICK"];
  function renderNavList(){
    const navList = document.getElementById('navList');
    navList.innerHTML = '';
    NAV_CATEGORIES.forEach(item => {
      const li = document.createElement('li');
      li.textContent = item;
      li.tabIndex = 0;
      li.onclick = () => {
        ui.toggleNav();
        const slug = item.toLowerCase().replace(/'/g,'').replace(/\s/g,'-');
        router.openCategory(slug);
      };
      li.onkeydown = (e)=>{ if(e.key==='Enter') li.click(); };
      navList.appendChild(li);
    });
  }

  /* ===========================
     HOME 렌더링: 2 big + 4 small 패턴
     - state.homeIndex를 기준으로 DEMO_POSTS에서 한 그룹씩 추가
     - 최대 HOME_MAX까지 렌더
  =========================== */
  function renderHomeChunk(){
    // prevent double calls
    const max = Math.min(HOME_MAX, DEMO_POSTS.length);
    if(state.homeIndex >= max) {
      document.getElementById('homeLoading').textContent = '더 이상 글이 없습니다.';
      return;
    }

    const container = document.getElementById('rowsContainer');

    // 한 번에 6개씩: 2 big (left) + 4 small (right)
    const take = Math.min(HOME_CHUNK_SIZE, max - state.homeIndex);
    const slice = DEMO_POSTS.slice(state.homeIndex, state.homeIndex + take);

    // Build row
    const row = document.createElement('div');
    row.className = 'row';

    // LEFT: up to 2 big cards
    const colLeft = document.createElement('div');
    colLeft.className = 'col-left';
    slice.slice(0,2).forEach(p => {
      const big = document.createElement('article');
      big.className = 'big-card';
      const thumb = (p._embedded && p._embedded['wp:featuredmedia'] && p._embedded['wp:featuredmedia'][0] && p._embedded['wp:featuredmedia'][0].source_url) ? p._embedded['wp:featuredmedia'][0].source_url : placeholderDataURI(1200,600,'No Image');
      big.innerHTML = `<img class="thumb" src="${thumb}" alt="thumb"><div class="card-body"><h3>${p.title.rendered}</h3><p>${stripHtml(p.excerpt && p.excerpt.rendered ? p.excerpt.rendered : '')}</p></div>`;
      big.onclick = ()=> openPostOverlayById(p.id);
      colLeft.appendChild(big);
    });

    // RIGHT: up to 4 small cards
    const colRight = document.createElement('div');
    colRight.className = 'col-right';
    slice.slice(2,6).forEach(p=>{
      const small = document.createElement('div');
      small.className = 'small-card';
      const thumb = (p._embedded && p._embedded['wp:featuredmedia'] && p._embedded['wp:featuredmedia'][0] && p._embedded['wp:featuredmedia'][0].source_url) ? p._embedded['wp:featuredmedia'][0].source_url : placeholderDataURI(400,240,'No Image');
      const cat = (p._embedded && p._embedded['wp:term'] && p._embedded['wp:term'][0] && p._embedded['wp:term'][0][0] && p._embedded['wp:term'][0][0].name) ? p._embedded['wp:term'][0][0].name : '';
      const title = p.title && p.title.rendered ? p.title.rendered : '제목없음';
      small.innerHTML = `<img src="${thumb}" alt=""><div class="meta"><h4>${title}</h4><p>${cat}</p></div>`;
      small.onclick = ()=> openPostOverlayById(p.id);
      colRight.appendChild(small);
    });

    row.appendChild(colLeft);
    row.appendChild(colRight);
    container.appendChild(row);

    // Save to cache
    slice.forEach(s => state.postsCache[s.id] = s);
    state.homeIndex += slice.length;

    // Adjust left hero min-height to right column height if needed (desktop)
    setTimeout(()=> {
      try {
        const leftHeight = colLeft.getBoundingClientRect().height;
        const rightHeight = colRight.getBoundingClientRect().height;
        if(leftHeight < rightHeight) {
          colLeft.style.minHeight = rightHeight + 'px';
        }
      } catch(e){}
    }, 60);

    // Clear loading text if not finished
    if(state.homeIndex >= max) {
      document.getElementById('homeLoading').textContent = '';
    }
  }

  /* ===========================
     카테고리 로드 (샘플: DEMO_POSTS 필터)
     - 실제로는 api(`posts?categories=${catId}`) 등을 호출
  =========================== */
  function loadCategoryPage(slug) {
    const overlay = document.getElementById('categoryOverlay');
    overlay.dataset.slug = slug;
    overlay.classList.add('active');
    overlay.scrollTop = 0;
    document.getElementById('categoryOverlayTitle').textContent = slug.toUpperCase();
    document.getElementById('categoryOverlaySubtitle').textContent = `카테고리: ${slug}`;
    const grid = document.getElementById('categoryGrid');
    grid.innerHTML = '';
    const posts = DEMO_POSTS.filter(p => {
      const term = (p._embedded && p._embedded['wp:term'] && p._embedded['wp:term'][0] && p._embedded['wp:term'][0][0] && p._embedded['wp:term'][0][0].slug) ? p._embedded['wp:term'][0][0].slug : '';
      return term && term.includes(slug);
    });
    if(posts.length === 0) {
      grid.innerHTML = '<div style="color:#666;padding:14px">해당 카테고리에 게시물이 없습니다.</div>';
    } else {
      posts.forEach(p => {
        const card = createCardNode(p);
        grid.appendChild(card);
        state.postsCache[p.id] = p;
      });
    }
    history.pushState({ page: 'category', slug }, '', `#category-${slug}`);
  }

  /* ===========================
     카드 노드 생성 (카테고리/검색 결과 등)
  =========================== */
  function createCardNode(post) {
    const elTpl = document.getElementById('cardTpl');
    const node = elTpl.content.firstElementChild.cloneNode(true);
    const img = node.querySelector('img');
    const titleEl = node.querySelector('.title');
    const metaSub = node.querySelector('.meta-sub');
    let thumb = placeholderDataURI(400,240,'No Image');
    try {
      if(post._embedded && post._embedded['wp:featuredmedia'] && post._embedded['wp:featuredmedia'][0] && post._embedded['wp:featuredmedia'][0].source_url) thumb = post._embedded['wp:featuredmedia'][0].source_url;
    } catch(e){}
    img.src = thumb;
    titleEl.textContent = post.title && post.title.rendered ? stripHtml(post.title.rendered) : '제목 없음';
    metaSub.textContent = formatDate(post.date);
    node.onclick = ()=> openPostOverlayById(post.id);
    return node;
  }

  /* ===========================
     포스트 오버레이: ID 로 로딩 및 렌더
     - 공유 버튼: navigator.share 지원 시 사용, 아니면 클립보드 복사
     - 닫기 버튼이 정상 작동하도록 history 처리
  =========================== */
  function openPostOverlayById(id) {
    if(!id) return;
    const cached = state.postsCache[id];
    if(cached && cached.content && cached.content.rendered) { renderPostOverlay(cached); return; }

    // 샘플 데이터에서는 DEMO_POSTS에서 검색
    const post = DEMO_POSTS.find(p=>p.id === id);
    if(!post) {
      alert('게시물을 찾을 수 없습니다.');
      return;
    }
    state.postsCache[post.id] = post;
    renderPostOverlay(post);
  }

  function renderPostOverlay(post) {
    const overlay = document.getElementById('postOverlay');
    const article = document.getElementById('postArticle');
    const title = post.title && post.title.rendered ? post.title.rendered : '제목 없음';
    const author = (post._embedded && post._embedded.author && post._embedded.author[0] && post._embedded.author[0].name) ? post._embedded.author[0].name : '익명';
    const avatar = (post._embedded && post._embedded.author && post._embedded.author[0] && post._embedded.author[0].avatar_urls) ? (post._embedded.author[0].avatar_urls['48'] || post._embedded.author[0].avatar_urls['24']) : '';
    const categories = (post._embedded && post._embedded['wp:term'] && post._embedded['wp:term'][0]) ? post._embedded['wp:term'][0].map(t=>t.name).join(', ') : '-';
    const dateStr = formatDate(post.date);
    const contentHTML = post.content && post.content.rendered ? post.content.rendered : (post.excerpt && post.excerpt.rendered ? post.excerpt.rendered : '');

    article.innerHTML = `
      <h1>${title}</h1>
      <div style="display:flex;align-items:center;gap:12px;margin-bottom:12px">
        <img src="${avatar || placeholderDataURI(48,48,'U')}" alt="author" style="width:52px;height:52px;border-radius:50%;object-fit:cover;">
        <div>
          <div style="font-weight:800;color:#111">${author}</div>
          <div style="color:#666;font-size:13px">${dateStr} · ${categories}</div>
        </div>
      </div>
      <div class="post-content">${contentHTML}</div>
      <div style="margin-top:18px;color:#888;font-size:13px">원문 링크: <a href="${post.link}" target="_blank" rel="noopener">${post.link}</a></div>
    `;

    // make images responsive in content
    article.querySelectorAll('.post-content img').forEach(img=>{
      img.style.maxWidth = '100%';
      img.style.height = 'auto';
      img.style.display = 'block';
      img.style.margin = '12px 0';
    });

    overlay.classList.add('active');
    overlay.scrollTop = 0;

    // update history hash to allow sharing
    history.pushState({ page: 'post', id: post.id }, '', `#post-${post.id}`);

    // share button handler
    const shareBtn = document.getElementById('sharePostBtn');
    shareBtn.onclick = ()=>{
      const shareUrl = location.origin + location.pathname + `#post-${post.id}`;
      const shareTitle = stripHtml(post.title && post.title.rendered ? post.title.rendered : 'IMPACT');
      if(navigator.share) {
        navigator.share({ title: shareTitle, url: shareUrl }).catch(()=> {
          copyToClipboard(shareUrl);
          alert('링크가 클립보드에 복사되었습니다.');
        });
      } else {
        copyToClipboard(shareUrl);
        alert('링크가 클립보드에 복사되었습니다.');
      }
    };

    // open original
    document.getElementById('openOriginalBtn').onclick = ()=> {
      window.open(post.link, '_blank', 'noopener');
    };
  }

  /* ===========================
     검색 (search overlay)
     - 검색어 입력 후 엔터 또는 돋보기 버튼으로 동작
     - 검색 결과 클릭 시 포스트 오버레이 열림
  =========================== */
  function doSearch(q){
    // if q param not provided, fetch from input
    if(typeof q === 'undefined' || q === null) q = (document.getElementById('searchInputTop') && document.getElementById('searchInputTop').value) || (document.getElementById('globalNavSearch') && document.getElementById('globalNavSearch').value) || '';
    q = q.trim();
    if(!q) { alert('검색어를 입력하세요'); return; }

    // open search overlay
    const searchOverlay = document.getElementById('searchOverlay');
    if(!searchOverlay.classList.contains('active')) ui.openSearch();

    const results = DEMO_POSTS.filter(p => {
      const txt = (stripHtml(p.title.rendered) + ' ' + stripHtml(p.excerpt && p.excerpt.rendered ? p.excerpt.rendered : '') + ' ' + (p.content && p.content.rendered ? stripHtml(p.content.rendered) : '')).toLowerCase();
      return txt.includes(q.toLowerCase());
    });

    const grid = document.getElementById('searchResults');
    grid.innerHTML = '';
    if(results.length === 0) {
      grid.innerHTML = '<div style="padding:20px;color:#666">검색 결과가 없습니다.</div>';
      return;
    }
    results.forEach(r => {
      state.postsCache[r.id] = r;
      const card = createCardNode(r);
      grid.appendChild(card);
    });
  }

  /* ===========================
     EDITORS: 수집 및 렌더링
     - postsCache에 있는 글을 기반으로 editors map 구성
  =========================== */
  function collectEditors(){
    const map = {};
    DEMO_POSTS.forEach(p=>{
      try {
        if(p._embedded && p._embedded.author && p._embedded.author[0]) {
          const a = p._embedded.author[0];
          const id = a.id || a.slug || a.name;
          if(!map[id]) map[id] = { id: a.id, name: a.name, avatar: (a.avatar_urls && (a.avatar_urls['48']||a.avatar_urls['24'])) ? (a.avatar_urls['48']||a.avatar_urls['24']) : placeholderDataURI(48,48,'U'), posts: [] };
          map[id].posts.push(p);
        }
      } catch(e){}
    });
    state.editors = map;
  }

  function renderEditorsList(){
    collectEditors();
    const grid = document.getElementById('editorsGrid');
    grid.innerHTML = '';
    Object.values(state.editors).forEach(ed => {
      const div = document.createElement('div');
      div.className = 'editor-card';
      div.innerHTML = `<img src="${ed.avatar}" alt="${ed.name}"><div class="editor-name">${ed.name}</div><div style="font-size:12px;color:#666;margin-top:8px">${ed.posts.length} posts</div>`;
      div.onclick = ()=> router.openEditorPage(ed.id);
      grid.appendChild(div);
    });
  }

  /* ===========================
     Editor page (individual) 렌더
     - overlay에서 해당 에디터가 작성한 모든 글 나열
  =========================== */
  function openEditorPage(editorId){
    const editors = state.editors || {};
    const ed = Object.values(editors).find(e => e.id === editorId);
    // if not found in state, try DEMO_EDITORS fallback
    if(!ed) {
      // build from DEMO_EDITORS
      const demo = DEMO_EDITORS.find(d => d.id === editorId);
      if(demo) {
        const posts = DEMO_POSTS.filter(p => (p._embedded && p._embedded.author && p._embedded.author[0] && p._embedded.author[0].id) === demo.id);
        const container = document.getElementById('editorPostsContainer');
        container.innerHTML = `<h3>${demo.name}</h3>`;
        if(posts.length === 0) container.innerHTML += '<div style="color:#666">작성된 글이 없습니다.</div>';
        else {
          posts.forEach(p=>{
            const div = document.createElement('div');
            div.className = 'small-card';
            const thumb = (p._embedded && p._embedded['wp:featuredmedia'] && p._embedded['wp:featuredmedia'][0] && p._embedded['wp:featuredmedia'][0].source_url) ? p._embedded['wp:featuredmedia'][0].source_url : placeholderDataURI(1200,600,'No Image');
            div.innerHTML = `<img src="${thumb}" style="width:140px;height:84px;object-fit:cover;border-radius:8px;margin-right:12px;"><div style="display:inline-block;vertical-align:top"><h4 style="margin:0">${stripHtml(p.title.rendered)}</h4><div style="color:#666;font-size:12px">${formatDate(p.date)}</div></div>`;
            div.onclick = ()=> openPostOverlayById(p.id);
            container.appendChild(div);
          });
        }
        document.getElementById('editorsOverlay').classList.add('active');
        history.pushState({ page:'editor', id: editorId }, '', `#editor-${editorId}`);
        return;
      }
      alert('해당 에디터 정보를 찾을 수 없습니다.');
      return;
    }

    const container = document.getElementById('editorPostsContainer');
    container.innerHTML = `<h3>${ed.name}</h3>`;
    if(!ed.posts || ed.posts.length === 0) container.innerHTML += '<div style="color:#666">작성된 글이 없습니다.</div>';
    else {
      ed.posts.forEach(p=>{
        const div = document.createElement('div');
        div.className = 'search-result';
        div.innerText = stripHtml(p.title && p.title.rendered ? p.title.rendered : '');
        div.onclick = ()=> openPostOverlayById(p.id);
        container.appendChild(div);
      });
    }
    document.getElementById('editorsOverlay').classList.add('active');
    history.pushState({ page:'editor', id: editorId }, '', `#editor-${editorId}`);
  }

  /* ===========================
     UI & Router 객체
     - ui: toggleNav, openSearch, closeSearch, searchNow
     - router: goHome, openCategory, closeCategory, openPost, closePost, openAbout, closeAbout, openEditors, closeEditors, openEditorPage
  =========================== */
  const ui = {
    toggleNav() {
      const nav = document.getElementById('navOverlay');
      nav.classList.toggle('active');
      // update aria expanded attribute on header button
      const btn = document.querySelector('.header-actions button[aria-controls="navOverlay"]');
      if(btn) btn.setAttribute('aria-expanded', nav.classList.contains('active') ? 'true' : 'false');
    },
    openSearch() {
      const overlay = document.getElementById('searchOverlay');
      overlay.classList.add('active');
      const input = document.getElementById('searchInputTop');
      if(input) input.focus();
      history.pushState({ page: 'search' }, '', '#search');
      document.getElementById('navOverlay').classList.remove('active');
    },
    closeSearch() {
      document.getElementById('searchOverlay').classList.remove('active');
      if(location.hash === '#search') history.back();
    },
    searchNow() {
      const input = document.getElementById('searchInputTop') || document.getElementById('globalNavSearch');
      const q = input ? input.value.trim() : '';
      if(!q) { alert('검색어를 입력하세요'); return; }
      doSearch(q);
    }
  };

  const router = {
    goHome() {
      // close overlays and scroll home
      document.querySelectorAll('.overlay-full').forEach(el => el.classList.remove('active'));
      window.scrollTo({ top: 0, behavior: 'smooth' });
      history.pushState({ page: 'home' }, '', '/');
    },
    openCategory(slug) {
      loadCategoryPage(slug);
      document.getElementById('navOverlay').classList.remove('active');
    },
    closeCategory() {
      document.getElementById('categoryOverlay').classList.remove('active');
      if(location.hash && location.hash.startsWith('#category-')) history.back();
    },
    openPost(post) {
      if(post && post.id) {
        state.postsCache[post.id] = post;
        renderPostOverlay(post);
        document.getElementById('navOverlay').classList.remove('active');
      }
    },
    closePost() {
      document.getElementById('postOverlay').classList.remove('active');
      if(location.hash && location.hash.startsWith('#post-')) history.back();
    },
    openAbout() {
      document.getElementById('aboutPageSection').classList.add('active');
      history.pushState({ page: 'about' }, '', '#about');
      document.getElementById('navOverlay').classList.remove('active');
    },
    closeAbout() {
      document.getElementById('aboutPageSection').classList.remove('active');
      if(location.hash === '#about') history.back();
    },
    openEditors() {
      renderEditorsList();
      document.getElementById('editorsOverlay').classList.add('active');
      history.pushState({ page: 'editors' }, '', '#editors');
    },
    closeEditors() {
      document.getElementById('editorsOverlay').classList.remove('active');
      if(location.hash === '#editors') history.back();
    },
    openEditorPage(id) {
      openEditorPage(id);
    }
  };

  /* ===========================
     전역 헬퍼 바인딩
  =========================== */
  window.openAbout = () => router.openAbout();
  window.openEditors = () => router.openEditors();
  window.openCategory = slug => router.openCategory(slug);
  window.openPost = id => openPostOverlayById(id);
  function openNavlessSearch(){ document.getElementById('navOverlay').classList.remove('active'); ui.openSearch(); }

  /* ===========================
     이벤트 바인딩
  =========================== */
  function bindEvents(){
    renderNavList();

    // nav close X
    const navClose = document.getElementById('navCloseBtn');
    if(navClose) navClose.addEventListener('click', ()=> { document.getElementById('navOverlay').classList.remove('active'); });

    // overlay close buttons
    const postCloseBtn = document.getElementById('postCloseBtn');
    if(postCloseBtn) postCloseBtn.addEventListener('click', ()=> { router.closePost(); });

    const categoryCloseBtn = document.getElementById('categoryCloseBtn');
    if(categoryCloseBtn) categoryCloseBtn.addEventListener('click', ()=> { router.closeCategory(); });

    const searchCloseBtn = document.getElementById('searchCloseBtn');
    if(searchCloseBtn) searchCloseBtn.addEventListener('click', ()=> { ui.closeSearch(); });

    const aboutCloseBtn = document.getElementById('aboutCloseBtn');
    if(aboutCloseBtn) aboutCloseBtn.addEventListener('click', ()=> { router.closeAbout(); });

    const editorsCloseBtn = document.getElementById('editorsCloseBtn');
    if(editorsCloseBtn) editorsCloseBtn.addEventListener('click', ()=> { router.closeEditors(); });

    // search enter key in top overlay and nav
    const topSearchInput = document.getElementById('searchInputTop');
    if(topSearchInput) topSearchInput.addEventListener('keydown', (e)=> { if(e.key==='Enter'){ e.preventDefault(); ui.searchNow(); } });

    const globalNavSearch = document.getElementById('globalNavSearch');
    if(globalNavSearch) globalNavSearch.addEventListener('keydown', (e)=> { if(e.key==='Enter'){ e.preventDefault(); const q = globalNavSearch.value.trim(); if(q) doSearch(q); document.getElementById('navOverlay').classList.remove('active'); } });

    // search btn
    const globalSearchBtn = document.getElementById('globalSearchBtn');
    if(globalSearchBtn) globalSearchBtn.addEventListener('click', (e)=> { e.preventDefault(); ui.searchNow(); });

    // to top
    const toTopBtn = document.getElementById('toTopBtn');
    if(toTopBtn) toTopBtn.addEventListener('click', ()=> window.scrollTo({ top:0, behavior:'smooth' }));

    // infinite scroll for home
    window.addEventListener('scroll', onScrollHandler, { passive:true });

    // keyboard ESC to close overlays
    window.addEventListener('keydown', (e)=> { if(e.key === 'Escape'){ document.getElementById('navOverlay').classList.remove('active'); document.querySelectorAll('.overlay-full').forEach(o=>o.classList.remove('active')); } });

    // hashchange routing (for sharing direct links)
    window.addEventListener('hashchange', routeFromHash, false);
  }

  /* ===========================
     스크롤 핸들러 (무한 스크롤)
  =========================== */
  function onScrollHandler(){
    const toTop = document.getElementById('toTopBtn');
    if(window.scrollY > 300) toTop.classList.add('show'); else toTop.classList.remove('show');

    // when near bottom, load next chunk
    if(window.innerHeight + window.scrollY >= document.body.offsetHeight - 1200) {
      renderHomeChunk();
    }
  }

  /* ===========================
     라우팅: 해시로 들어올 때 적절히 오버레이 연다
  =========================== */
  function routeFromHash(){
    const h = location.hash || '';
    if(h.startsWith('#post-')) {
      const id = parseInt(h.replace('#post-',''));
      if(id) openPostOverlayById(id);
    } else if(h === '#about') {
      router.openAbout();
    } else if(h === '#editors') {
      router.openEditors();
    } else if(h.startsWith('#editor-')) {
      const eid = parseInt(h.replace('#editor-',''));
      if(eid) openEditorPage(eid);
    } else if(h.startsWith('#category-')) {
      const slug = h.replace('#category-','');
      router.openCategory(slug);
    } else if(h === '#search') {
      ui.openSearch();
    } else {
      // default: home
    }
  }

  /* ===========================
     유틸: 텍스트 클립보드 복사 (fallback)
  =========================== */
  function copyToClipboard(text){
    if(navigator.clipboard && navigator.clipboard.writeText) return navigator.clipboard.writeText(text);
    const ta = document.createElement('textarea');
    ta.value = text; document.body.appendChild(ta); ta.select();
    try { document.execCommand('copy'); } catch(e) {}
    document.body.removeChild(ta);
  }

  /* ===========================
     유틸: HTML 제거 (간단)
  =========================== */
  function stripHtml(html){
    const tmp = document.createElement('div');
    tmp.innerHTML = html || '';
    return tmp.textContent || tmp.innerText || '';
  }

  /* ===========================
     초기화
  =========================== */
  (function init(){
    // 초기 데이터 캐시
    DEMO_POSTS.forEach(p => state.postsCache[p.id] = p);
    // render initial nav & editors
    renderNavList();
    renderEditorsList();
    // render initial home chunks until we have 20 posts (or less if fewer)
    renderHomeChunk();
    // bind events
    bindEvents();
    // process hash route if any
    routeFromHash();
    // Replace initial history state for clean back behavior
    history.replaceState({ page:'home' }, '', '/');
  })();

  /* ===========================
     Netlify functions & WP proxy 안내 (문서화 주석)
     - 실제로 WP API를 사용하려면 아래처럼 서버사이드 프록시를 구현하세요.
     - 이 HTML에는 토큰이 포함되지 않습니다.
     *
     * 예시 (Netlify functions - wpProxy.js):
     * exports.handler = async function(event, context) {
     *   const WP_SITE = "impactceo0.wordpress.com";
     *   const ACCESS_TOKEN = process.env.WP_TOKEN;
     *   const path = event.queryStringParameters.path;
     *   if(!path) return { statusCode:400, body: JSON.stringify({ error: "Missing path" }) };
     *   const url = `https://public-api.wordpress.com/wp/v2/sites/${WP_SITE}/${path}`;
     *   try {
     *     const res = await fetch(url, { headers: { "Authorization": `Bearer ${ACCESS_TOKEN}` }});
     *     const data = await res.text();
     *     return { statusCode: res.status, headers: { "Content-Type": "application/json" }, body: data };
     *   } catch(err) { return { statusCode:500, body: JSON.stringify({ error: err.message }) }; }
     * };
     *
     * 클라이언트에서 호출 예:
     * fetch(`/.netlify/functions/wpProxy?path=${encodeURIComponent('posts?per_page=10&_embed')}`)
     * ======================================================================== */

  </script>

  <!-- ===========================
       끝 (end of file)
     =========================== -->
</body>
</html>
